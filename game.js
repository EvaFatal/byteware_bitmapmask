// Generated by Haxe 3.4.7
(function ($global) { "use strict";
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var tofu_events_EventBase = function(is_enabled,dispatch_once) {
	if(dispatch_once == null) {
		dispatch_once = false;
	}
	if(is_enabled == null) {
		is_enabled = false;
	}
	this.c_enabled = is_enabled;
	this.c_dispatch_once = dispatch_once;
	this.clear();
};
tofu_events_EventBase.__name__ = true;
tofu_events_EventBase.prototype = {
	clear: function() {
		this.c_base = [];
		this.numListeners = 0;
	}
	,on: function(listener,priority) {
		if(priority == null || priority > this.numListeners) {
			priority = this.numListeners;
		} else if(priority < 0) {
			priority = 0;
		}
		var i = this.c_base.indexOf(listener);
		if(i == -1) {
			if(this.c_enabled) {
				if(!this.c_dispatch_once) {
					this.c_base.splice(priority,0,listener);
					this.numListeners++;
				}
				this.execute_listener(listener);
			} else {
				this.c_base.splice(priority,0,listener);
				this.numListeners++;
			}
			return true;
		} else {
			this.c_base.splice(i,1);
			this.c_base.splice(priority,0,listener);
		}
		return false;
	}
	,off: function(listener) {
		var i = this.c_base.indexOf(listener);
		if(i != -1) {
			this.c_base.splice(i,1);
			this.numListeners--;
			return true;
		}
		return false;
	}
	,has: function(listener) {
		return this.c_base.indexOf(listener) != -1;
	}
	,execute_all: function() {
		var i = -1;
		while(++i < this.numListeners) this.execute_listener(this.c_base[i]);
		if(this.c_dispatch_once) {
			this.clear();
		}
	}
	,execute_listener: function(listener) {
		ReflectTools.call(listener,null);
	}
	,get_isEnabled: function() {
		return this.c_enabled;
	}
	,set_isEnabled: function(val) {
		if(val) {
			this.execute_all();
		}
		return this.c_enabled = val;
	}
	,get_dispatchOnce: function() {
		return this.c_dispatch_once;
	}
	,set_dispatchOnce: function(val) {
		return this.c_dispatch_once = val;
	}
	,__class__: tofu_events_EventBase
};
var tofu_events_Event0 = function(is_enabled,dispatch_once) {
	if(dispatch_once == null) {
		dispatch_once = false;
	}
	if(is_enabled == null) {
		is_enabled = false;
	}
	tofu_events_EventBase.call(this,is_enabled,dispatch_once);
};
tofu_events_Event0.__name__ = true;
tofu_events_Event0.__super__ = tofu_events_EventBase;
tofu_events_Event0.prototype = $extend(tofu_events_EventBase.prototype,{
	dispatch: function(enable,remove_listeners) {
		if(remove_listeners == null) {
			remove_listeners = false;
		}
		if(enable == null) {
			enable = false;
		}
		this.c_enabled = enable;
		this.execute_all();
		if(remove_listeners) {
			this.clear();
		}
	}
	,__class__: tofu_events_Event0
});
var App = function() { };
App.__name__ = true;
App.start = function(app_name,width,height,min_width,min_height) {
	if(App.isStarted) {
		return;
	} else {
		App.isStarted = true;
	}
	App.WIDTH = width < 2 ? 2 : width;
	App.HEIGHT = height < 2 ? 2 : height;
	App.MIN_WIDTH = min_width == null || min_width > width ? width : min_width;
	App.MIN_HEIGHT = min_height == null || min_height > height ? height : min_height;
	byteware_Ticker.normalize();
	App.ticker = new byteware_Ticker(true,false);
	App.root = new byteware_RootContainer(App.WIDTH,App.HEIGHT);
	App.platform = new platform_html5_HTML5Platform(app_name);
	App.g_renderer = App.platform.get_renderer();
	SFX.init();
	App.onStarted.dispatch(true,true);
};
App.pause = function(state) {
	if(App.isPaused == state) {
		return;
	} else {
		App.isPaused = state;
	}
	byteware_Ticker.event_pause(state);
	SFX.event_pause(state);
	if(state) {
		App.onPause.dispatch(false,false);
	} else {
		App.onResume.dispatch(false,false);
	}
};
App.event_render = function() {
	if(App.isActive) {
		byteware_Ticker.event_update();
		var context = App.g_renderer.context;
		App.g_renderer.pre_render();
		App.root.render(context,0,0);
		App.g_renderer.post_render();
	}
};
App.event_activate = function() {
	if(!App.isActive) {
		byteware_Ticker.normalize();
		SFX.event_activate(true);
		App.onActivate.dispatch(false,false);
		App.isActive = true;
	}
};
App.event_deactivate = function() {
	if(App.isActive) {
		App.isActive = false;
	} else {
		return;
	}
	SFX.event_activate(false);
	App.onDeactivate.dispatch(false,false);
};
App.event_resize = function(w,h) {
	var landscape = w > h;
	var scale = 1.0;
	if(landscape) {
		var scale_w = w / App.MIN_WIDTH;
		var scale_h = h / App.MIN_HEIGHT;
		if(scale_w < scale_h) {
			scale = scale_w;
		} else {
			scale = scale_h;
		}
		App.TOP = (App.HEIGHT - App.MIN_HEIGHT) * .5 | 0;
		App.BOTTOM = App.TOP + App.MIN_HEIGHT | 0;
		App.LEFT = (App.WIDTH - w / scale) * .5 | 0;
		App.RIGHT = App.LEFT + w / scale | 0;
	} else {
		scale = w / App.MIN_WIDTH;
		if(h * scale > App.MIN_HEIGHT * scale) {
			var ws = h / App.MIN_HEIGHT;
			if(ws < scale) {
				scale = ws;
			} else {
				scale = scale;
			}
		}
		App.TOP = (App.HEIGHT - h / scale) * .5 | 0;
		App.BOTTOM = App.TOP + h / scale | 0;
		App.LEFT = (App.WIDTH - App.MIN_WIDTH) * .5 | 0;
		App.RIGHT = App.LEFT + App.MIN_WIDTH | 0;
	}
	if(App.TOP < 0) {
		App.TOP = 0;
	}
	if(App.BOTTOM > App.HEIGHT) {
		App.BOTTOM = App.HEIGHT;
	}
	if(App.LEFT < 0) {
		App.LEFT = 0;
	}
	if(App.RIGHT > App.WIDTH) {
		App.RIGHT = App.WIDTH;
	}
	App.CURRENT_WIDTH = App.RIGHT - App.LEFT;
	App.CURRENT_HEIGHT = App.BOTTOM - App.TOP;
	if(App.root != null) {
		App.root.transform((w - App.WIDTH * scale) * .5,(h - App.HEIGHT * scale) * .5,scale,scale,0.0,0.0);
	}
	App.onResize.dispatch(false,false);
};
var byteware_geom_Transform = function(x,y,scaleX,scaleY,pivotX,pivotY) {
	if(pivotY == null) {
		pivotY = 0.0;
	}
	if(pivotX == null) {
		pivotX = 0.0;
	}
	if(scaleY == null) {
		scaleY = 1.0;
	}
	if(scaleX == null) {
		scaleX = 1.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	this.bounds = new byteware_geom_Rect();
	this.c_mat = new byteware_geom_Mat();
	this.c_skewX = this.c_skewY = this.c_deg = this.c_rad = 0.0;
	this.c_w = this.c_h = 0;
	this.transform(x,y,scaleX,scaleY,pivotX,pivotY);
};
byteware_geom_Transform.__name__ = true;
byteware_geom_Transform.prototype = {
	transform: function(x,y,scaleX,scaleY,pivotX,pivotY) {
		if(pivotY == null) {
			pivotY = 0.0;
		}
		if(pivotX == null) {
			pivotX = 0.0;
		}
		if(scaleY == null) {
			scaleY = 1.0;
		}
		if(scaleX == null) {
			scaleX = 1.0;
		}
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		this.c_x = x;
		this.c_y = y;
		this.c_scaleX = scaleX;
		this.c_scaleY = scaleY;
		this.c_pivotX = pivotX;
		this.c_pivotY = pivotY;
		this.apply_transform();
	}
	,pos: function(x,y) {
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		this.c_x = x;
		this.c_y = y;
		this.apply_transform();
	}
	,resize: function(w,h) {
		if(h == null) {
			h = 0.0;
		}
		if(w == null) {
			w = 0.0;
		}
		this.c_w = w > 0.0 ? w | 0 : 0;
		this.c_h = h > 0.0 ? h | 0 : 0;
		this.update_bounds();
	}
	,scale: function(x,y) {
		if(y == null) {
			y = 1.0;
		}
		if(x == null) {
			x = 1.0;
		}
		this.c_scaleX = x;
		this.c_scaleY = y;
		this.apply_transform();
	}
	,skew: function(x,y) {
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		this.c_skewX = x;
		this.c_skewY = y;
		this.apply_transform();
	}
	,pivot: function(x,y) {
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		this.c_pivotX = x;
		this.c_pivotY = y;
		this.apply_transform();
	}
	,anchor: function(x,y) {
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		this.c_pivotX = this.c_w * x;
		this.c_pivotY = this.c_h * y;
		this.apply_transform();
	}
	,copyTransform: function(to) {
		if(to == null) {
			to = new byteware_geom_Transform();
		}
		to.resize(this.c_w,this.c_h);
		to.set_mat(this.c_mat);
		return to;
	}
	,resetTransform: function() {
		this.c_x = this.c_y = this.c_pivotX = this.c_pivotY = this.c_skewX = this.c_skewY = this.c_deg = this.c_rad = 0.0;
		this.c_scaleX = this.c_scaleY = 1.0;
		this.apply_transform();
	}
	,apply_transform: function() {
		if(this.c_skewX == 0.0 && this.c_skewY == 0.0) {
			if(this.c_rad == 0.0) {
				this.c_mat.set(this.c_scaleX,0.0,0.0,this.c_scaleY,this.c_x - this.c_pivotX * this.c_scaleX,this.c_y - this.c_pivotY * this.c_scaleY);
			} else {
				var sin = Math.sin(this.c_rad);
				var cos = Math.cos(this.c_rad);
				var a = this.c_scaleX * cos;
				var b = this.c_scaleX * sin;
				var c = this.c_scaleY * -sin;
				var d = this.c_scaleY * cos;
				var e = this.c_x - this.c_pivotX * a - this.c_pivotY * c;
				var f = this.c_y - this.c_pivotX * b - this.c_pivotY * d;
				this.c_mat.set(a,b,c,d,e,f);
			}
		} else {
			this.c_mat.set();
			this.c_mat.scale(this.c_scaleX,this.c_scaleY);
			this.c_mat.skew(this.c_skewX,this.c_skewY);
			this.c_mat.rotate_deg(this.c_rad * 180.0 / 3.141592653589793);
			this.c_mat.translate(this.c_x,this.c_y);
			if(this.c_pivotX != 0.0 || this.c_pivotY != 0.0) {
				this.c_mat.e = this.c_x - this.c_mat.a * this.c_pivotX - this.c_mat.c * this.c_pivotY;
				this.c_mat.f = this.c_y - this.c_mat.b * this.c_pivotX - this.c_mat.d * this.c_pivotY;
			}
		}
		this.update_bounds();
		this.event_transform();
	}
	,update_bounds: function() {
		this.bounds.set(0.0,0.0,this.c_w,this.c_h);
		this.c_mat.transformRect(this.bounds,null);
	}
	,event_transform: function() {
		if(this.e_transform != null) {
			this.e_transform.dispatch(false,false);
		}
	}
	,get_onTransform: function() {
		if(this.e_transform == null) {
			this.e_transform = new tofu_events_Event0(false,false);
		}
		return this.e_transform;
	}
	,get_mat: function() {
		return this.c_mat;
	}
	,set_mat: function(val) {
		val.copy(this.c_mat);
		this.c_pivotX = this.c_pivotY = 0.0;
		this.c_x = val.e;
		this.c_y = val.f;
		this.c_skewX = Math.atan(-val.c / val.d);
		this.c_skewY = Math.atan(val.b / val.a);
		this.c_scaleX = this.c_skewY > -0.78539816339744828 && this.c_skewY < 0.7853981633974483 ? val.a / Math.cos(this.c_skewY) : val.b / Math.sin(this.c_skewY);
		this.c_scaleY = this.c_skewX > -0.78539816339744828 && this.c_skewX < 0.7853981633974483 ? val.d / Math.cos(this.c_skewX) : -val.c / Math.sin(this.c_skewX);
		if(this.c_skewX - .0001 < this.c_skewY && this.c_skewX + .0001 > this.c_skewY) {
			this.c_rad = this.c_skewX;
			this.c_deg = this.c_skewX * 180.0 / 3.141592653589793;
			this.c_skewX = this.c_skewY = 0.0;
		} else {
			this.c_rad = this.c_deg = 0.0;
		}
		this.apply_transform();
		return val;
	}
	,get_x: function() {
		return this.c_x;
	}
	,set_x: function(val) {
		if(val != this.c_x) {
			this.c_x = val;
			this.apply_transform();
		}
		return val;
	}
	,get_y: function() {
		return this.c_y;
	}
	,set_y: function(val) {
		if(val != this.c_y) {
			this.c_y = val;
			this.apply_transform();
		}
		return val;
	}
	,get_w: function() {
		return this.c_w;
	}
	,set_w: function(val) {
		if(val < 0.0) {
			val = 0.0;
		}
		var width = val | 0;
		if(width != this.c_w) {
			this.c_w = width;
			this.update_bounds();
		}
		return val;
	}
	,get_h: function() {
		return this.c_h;
	}
	,set_h: function(val) {
		if(val < 0.0) {
			val = 0.0;
		}
		var height = val | 0;
		if(height != this.c_h) {
			this.c_h = height;
			this.update_bounds();
		}
		return val;
	}
	,get_scaleX: function() {
		return this.c_scaleX;
	}
	,set_scaleX: function(val) {
		if(val != this.c_scaleX) {
			this.c_scaleX = val;
			this.apply_transform();
		}
		return val;
	}
	,get_scaleY: function() {
		return this.c_scaleY;
	}
	,set_scaleY: function(val) {
		if(val != this.c_scaleY) {
			this.c_scaleY = val;
			this.apply_transform();
		}
		return val;
	}
	,get_skewX: function() {
		return this.c_skewX;
	}
	,set_skewX: function(val) {
		val = MathTools.normalize_rad(val);
		if(val != this.c_skewX) {
			this.c_skewX = val;
			this.apply_transform();
		}
		return val;
	}
	,get_skewY: function() {
		return this.c_skewY;
	}
	,set_skewY: function(val) {
		val = MathTools.normalize_rad(val);
		if(val != this.c_skewY) {
			this.c_skewY = val;
			this.apply_transform();
		}
		return val;
	}
	,get_pivotX: function() {
		return this.c_pivotX;
	}
	,set_pivotX: function(val) {
		if(val != this.c_pivotX) {
			this.c_pivotX = val;
			this.apply_transform();
		}
		return val;
	}
	,get_pivotY: function() {
		return this.c_pivotY;
	}
	,set_pivotY: function(val) {
		if(val != this.c_pivotY) {
			this.c_pivotY = val;
			this.apply_transform();
		}
		return val;
	}
	,get_deg: function() {
		return this.c_deg;
	}
	,set_deg: function(val) {
		val = MathTools.normalize_deg(val);
		if(val != this.c_deg) {
			this.c_deg = val;
			this.c_rad = val * 3.141592653589793 / 180.0;
			this.apply_transform();
		}
		return val;
	}
	,get_rad: function() {
		return this.c_rad;
	}
	,set_rad: function(val) {
		val = MathTools.normalize_rad(val);
		if(val != this.c_rad) {
			this.c_rad = val;
			this.c_deg = val * 180.0 / 3.141592653589793;
			this.apply_transform();
		}
		return val;
	}
	,__class__: byteware_geom_Transform
};
var byteware_graphics_RenderObject = function(x,y,scaleX,scaleY,pivotX,pivotY) {
	if(pivotY == null) {
		pivotY = 0.0;
	}
	if(pivotX == null) {
		pivotX = 0.0;
	}
	if(scaleY == null) {
		scaleY = 1.0;
	}
	if(scaleX == null) {
		scaleX = 1.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	byteware_geom_Transform.call(this,x,y,scaleX,scaleY,pivotX,pivotY);
	this.c_vis = true;
	this.c_vis_area = null;
	this.c_alpha = 1.0;
};
byteware_graphics_RenderObject.__name__ = true;
byteware_graphics_RenderObject.__super__ = byteware_geom_Transform;
byteware_graphics_RenderObject.prototype = $extend(byteware_geom_Transform.prototype,{
	crop: function(x,y,w,h) {
		if(h == null) {
			h = 0.0;
		}
		if(w == null) {
			w = 0.0;
		}
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		if(this.c_vis_area == null) {
			this.c_vis_area = new byteware_geom_Rect(x,y,w,h);
		} else {
			this.c_vis_area.set(x,y,w,h);
		}
	}
	,draw: function(context) {
	}
	,render: function(context,offsetX,offsetY) {
		if(!this.c_vis || this.c_alpha == 0.0) {
			return;
		}
		context.save();
		if(this.c_alpha < 1.0) {
			context.adjustAlpha(this.c_alpha);
		}
		var e = Math.round(this.c_mat.e);
		var f = Math.round(this.c_mat.f);
		context.transform(this.c_mat.a,this.c_mat.b,this.c_mat.c,this.c_mat.d,e + offsetX,f + offsetY);
		if(this.c_vis_area != null) {
			context.crop(this.c_vis_area.x | 0,this.c_vis_area.y | 0,this.c_vis_area.w | 0,this.c_vis_area.h | 0);
		}
		if(this.c_mask != null) {
			context.setMask(this.c_mask);
		}
		this.draw(context);
		context.restore();
	}
	,event_vischange: function() {
		if(this.e_vischange != null) {
			this.e_vischange.dispatch(false,false);
		}
	}
	,get_onVisChange: function() {
		if(this.e_vischange == null) {
			this.e_vischange = new tofu_events_Event0(false,false);
		}
		return this.e_vischange;
	}
	,get_isVisible: function() {
		return this.c_vis;
	}
	,set_isVisible: function(val) {
		if(val != this.c_vis) {
			this.c_vis = val;
			this.event_vischange();
		}
		return val;
	}
	,get_visibleArea: function() {
		return this.c_vis_area;
	}
	,set_visibleArea: function(val) {
		this.c_vis_area = val == null ? null : val.copy(this.c_vis_area);
		this.event_vischange();
		return val;
	}
	,get_alpha: function() {
		return this.c_alpha;
	}
	,set_alpha: function(val) {
		if(val < 0.0) {
			val = 0.0;
		} else if(val > 1.0) {
			val = 1.0;
		}
		if(val != this.c_alpha) {
			this.c_alpha = val;
			this.event_vischange();
		}
		return val;
	}
	,get_mask: function() {
		return this.c_mask;
	}
	,set_mask: function(val) {
		return this.c_mask = val;
	}
	,__class__: byteware_graphics_RenderObject
});
var DisplayObject = function(x,y,scaleX,scaleY,pivotX,pivotY) {
	if(pivotY == null) {
		pivotY = 0.0;
	}
	if(pivotX == null) {
		pivotX = 0.0;
	}
	if(scaleY == null) {
		scaleY = 1.0;
	}
	if(scaleX == null) {
		scaleX = 1.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	byteware_graphics_RenderObject.call(this,x,y,scaleX,scaleY,pivotX,pivotY);
	this.pointer = new byteware_geom_Pos();
	this.parent = null;
	this.c_touchable = true;
	this.isAdded = this.isTouched = this.isOver = false;
};
DisplayObject.__name__ = true;
DisplayObject.__super__ = byteware_graphics_RenderObject;
DisplayObject.prototype = $extend(byteware_graphics_RenderObject.prototype,{
	event_added: function() {
		if(this.isAdded) {
			return;
		} else {
			this.isAdded = true;
		}
		if(this.e_added != null) {
			this.e_added.dispatch(false,false);
		}
	}
	,event_removed: function() {
		if(this.isAdded) {
			this.isAdded = false;
		} else {
			return;
		}
		if(this.e_removed != null) {
			this.e_removed.dispatch(false,false);
		}
	}
	,event_touch_begin: function() {
		if(this.isTouched) {
			return;
		} else {
			this.isTouched = true;
		}
		if(this.e_touch_begin != null) {
			this.e_touch_begin.dispatch(false,false);
		}
	}
	,event_touch_end: function() {
		if(this.isTouched) {
			this.isTouched = false;
		} else {
			return;
		}
		if(this.e_touch_end != null) {
			this.e_touch_end.dispatch(false,false);
		}
	}
	,event_touch_move: function() {
	}
	,event_touch_over: function() {
		if(this.isOver) {
			return;
		} else {
			this.isOver = true;
		}
		if(this.e_touch_over != null) {
			this.e_touch_over.dispatch(false,false);
		}
	}
	,event_touch_out: function() {
		if(this.isOver) {
			this.isOver = false;
		} else {
			return;
		}
		if(this.e_touch_out != null) {
			this.e_touch_out.dispatch(false,false);
		}
	}
	,submit_touch: function(x,y,state) {
		if(!this.c_vis || !this.c_touchable) {
			return null;
		}
		this.c_mat.inv_transformCoords(x,y,this.pointer);
		var contains = this.c_vis_area == null ? this.pointer.x >= 0 && this.pointer.y >= 0 && this.pointer.x < this.c_w && this.pointer.y < this.c_h : this.c_vis_area.containsCoords(this.pointer.x,this.pointer.y);
		if(!contains && this.isOver) {
			this.event_touch_out();
		}
		if(contains) {
			return this;
		} else {
			return null;
		}
	}
	,get_onAdded: function() {
		if(this.e_added == null) {
			this.e_added = new tofu_events_Event0(false,false);
		}
		return this.e_added;
	}
	,get_onRemoved: function() {
		if(this.e_removed == null) {
			this.e_removed = new tofu_events_Event0(false,false);
		}
		return this.e_removed;
	}
	,get_onTouchBegin: function() {
		if(this.e_touch_begin == null) {
			this.e_touch_begin = new tofu_events_Event0(false,false);
		}
		return this.e_touch_begin;
	}
	,get_onTouchEnd: function() {
		if(this.e_touch_end == null) {
			this.e_touch_end = new tofu_events_Event0(false,false);
		}
		return this.e_touch_end;
	}
	,get_onOver: function() {
		if(this.e_touch_over == null) {
			this.e_touch_over = new tofu_events_Event0(false,false);
		}
		return this.e_touch_over;
	}
	,get_onOut: function() {
		if(this.e_touch_out == null) {
			this.e_touch_out = new tofu_events_Event0(false,false);
		}
		return this.e_touch_out;
	}
	,get_isTouchable: function() {
		return this.c_touchable;
	}
	,set_isTouchable: function(val) {
		if(!val && (this.isOver || this.isTouched)) {
			this.event_touch_out();
		}
		return this.c_touchable;
	}
	,__class__: DisplayObject
});
var DisplayContainer = function(x,y,scaleX,scaleY,pivotX,pivotY) {
	if(pivotY == null) {
		pivotY = 0.0;
	}
	if(pivotX == null) {
		pivotX = 0.0;
	}
	if(scaleY == null) {
		scaleY = 1.0;
	}
	if(scaleX == null) {
		scaleX = 1.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	DisplayObject.call(this,x,y,scaleX,scaleY,pivotX,pivotY);
	this.numChildren = 0;
	this.c_touchgroup = false;
	this.c_children = [];
	this.cf_sort = null;
};
DisplayContainer.__name__ = true;
DisplayContainer.__super__ = DisplayObject;
DisplayContainer.prototype = $extend(DisplayObject.prototype,{
	draw: function(context) {
		if(this.cf_sort != null) {
			this.c_children.sort(this.cf_sort);
		}
		var i = -1;
		while(++i < this.numChildren) this.c_children[i].render(context,0,0);
	}
	,sort: function(func,once) {
		if(once == null) {
			once = true;
		}
		if(func == null || !once) {
			this.cf_sort = func;
		} else {
			this.c_children.sort(func);
		}
	}
	,addChild: function(child) {
		return this.addChildAt(child,this.numChildren);
	}
	,addChildAt: function(child,index) {
		if(index < 0) {
			index = 0;
		} else if(index > this.numChildren) {
			index = this.numChildren;
		}
		if(child.parent == this) {
			this.setChildIndex(child,index);
		} else {
			if(child.parent != null) {
				child.parent.removeChild(child);
			}
			this.c_children.splice(index,0,child);
			child.parent = this;
			this.numChildren++;
			if(this.isAdded) {
				child.event_added();
			}
			this.update_bounds();
			this.event_vischange();
		}
		return child;
	}
	,removeChild: function(child) {
		var index = this.c_children.indexOf(child);
		if(index == -1) {
			return child;
		} else {
			return this.removeChildAt(index);
		}
	}
	,removeChildAt: function(index) {
		if(index < 0) {
			index = 0;
		} else if(index > this.numChildren - 1) {
			index = this.numChildren - 1;
		}
		var child = this.c_children[index];
		if(child != null) {
			child.event_removed();
			child.parent = null;
			this.c_children.splice(index,1);
			this.numChildren--;
			this.update_bounds();
			this.event_vischange();
		}
		return child;
	}
	,removeChildren: function(from,to) {
		if(to == null) {
			to = -1;
		}
		if(from == null) {
			from = 0;
		}
		if(to < 0) {
			to = this.numChildren;
		}
		while(from < to) {
			this.removeChildAt(from);
			++from;
		}
	}
	,getChildAt: function(index) {
		if(index < 0) {
			index = 0;
		} else if(index > this.numChildren - 1) {
			index = this.numChildren - 1;
		}
		return this.c_children[index];
	}
	,getChildIndex: function(child) {
		return this.c_children.indexOf(child);
	}
	,setChildIndex: function(child,index) {
		if(index < 0) {
			index = 0;
		} else if(index > this.numChildren - 1) {
			index = this.numChildren - 1;
		}
		var prev = this.c_children.indexOf(child);
		if(prev != index && prev != -1) {
			this.c_children.splice(prev,1);
			this.c_children.splice(index,0,child);
			return true;
		}
		return false;
	}
	,swapChildren: function(child_1,child_2) {
		var index_1 = this.c_children.indexOf(child_1);
		var index_2 = this.c_children.indexOf(child_2);
		if(index_1 != -1 && index_2 != -1) {
			this.c_children[index_1] = child_2;
			this.c_children[index_2] = child_1;
			return true;
		}
		return false;
	}
	,swapChildrenAt: function(index_1,index_2) {
		var child_1 = this.c_children[index_1];
		var child_2 = this.c_children[index_2];
		if(child_1 != null && child_2 != null) {
			this.c_children[index_1] = child_2;
			this.c_children[index_2] = child_1;
			return true;
		}
		return false;
	}
	,event_added: function() {
		if(this.isAdded) {
			return;
		} else {
			this.isAdded = true;
		}
		if(this.e_added != null) {
			this.e_added.dispatch(false,false);
		}
		var i = -1;
		while(++i < this.numChildren) this.c_children[i].event_added();
	}
	,event_removed: function() {
		if(this.isAdded) {
			this.isAdded = false;
		} else {
			return;
		}
		if(this.e_removed != null) {
			this.e_removed.dispatch(false,false);
		}
		var i = -1;
		while(++i < this.numChildren) this.c_children[i].event_removed();
	}
	,submit_touch: function(x,y,state) {
		if(!this.c_vis || !this.c_touchable) {
			return null;
		}
		this.c_mat.inv_transformCoords(x,y,this.pointer);
		if(this.c_vis_area != null && !this.c_vis_area.containsCoords(this.pointer.x,this.pointer.y)) {
			return null;
		}
		var child = null;
		var current = null;
		var i = this.numChildren;
		while(--i > -1) {
			current = this.c_children[i];
			child = current.submit_touch(this.pointer.x,this.pointer.y,state);
			if(child != null) {
				if(this.c_touchgroup) {
					return this;
				} else {
					return child;
				}
			}
		}
		return null;
	}
	,resize: function(w,h) {
		if(h == null) {
			h = 0.0;
		}
		if(w == null) {
			w = 0.0;
		}
		this.c_scaleX = w / this.c_w;
		this.c_scaleY = h / this.c_h;
		this.apply_transform();
	}
	,update_bounds: function() {
		this.bounds.set();
		this.c_w = this.c_h = 0;
		if(this.numChildren == 0) {
			return;
		} else if(this.numChildren == 1) {
			this.c_children[0].bounds.copy(this.bounds);
		} else {
			var i = -1;
			while(++i < this.numChildren) this.bounds.expand(this.c_children[i].bounds);
		}
		this.c_w = Math.round(this.bounds.w);
		this.c_h = Math.round(this.bounds.h);
		this.c_mat.transformRect(this.bounds);
	}
	,get_isTouchGroup: function() {
		return this.c_touchgroup;
	}
	,set_isTouchGroup: function(val) {
		if(!val && (this.isOver || this.isTouched)) {
			this.event_touch_out();
		}
		return this.c_touchgroup = val;
	}
	,set_w: function(val) {
		var scale = val / this.c_w;
		if(scale != this.c_scaleX) {
			this.c_scaleX = scale;
			this.apply_transform();
		}
		return val;
	}
	,set_h: function(val) {
		var scale = val / this.c_h;
		if(scale != this.c_scaleY) {
			this.c_scaleY = scale;
			this.apply_transform();
		}
		return val;
	}
	,__class__: DisplayContainer
});
var EReg = function(r,opt) {
	this.r = new RegExp(r,opt.split("u").join(""));
};
EReg.__name__ = true;
EReg.prototype = {
	match: function(s) {
		if(this.r.global) {
			this.r.lastIndex = 0;
		}
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,__class__: EReg
};
var Sprite = function(texture,x,y,scaleX,scaleY,useTexturePivot) {
	if(useTexturePivot == null) {
		useTexturePivot = true;
	}
	if(scaleY == null) {
		scaleY = 1.0;
	}
	if(scaleX == null) {
		scaleX = 1.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	DisplayObject.call(this,x,y,scaleX,scaleY,this.get_pivotX(),this.get_pivotY());
	this.c_use_pivot = useTexturePivot;
	this.set_texture(texture);
};
Sprite.__name__ = true;
Sprite.__super__ = DisplayObject;
Sprite.prototype = $extend(DisplayObject.prototype,{
	resize: function(w,h) {
		if(h == null) {
			h = 0.0;
		}
		if(w == null) {
			w = 0.0;
		}
		this.c_scaleX = w / this.c_w;
		this.c_scaleY = h / this.c_h;
		this.apply_transform();
	}
	,draw: function(context) {
		if(this.c_texture != null) {
			context.drawTexture(this.c_texture,0,0);
		}
	}
	,get_texture: function() {
		return this.c_texture;
	}
	,set_texture: function(val) {
		if(val != this.c_texture) {
			this.c_texture = val;
			if(val != null) {
				this.c_w = this.c_texture.w;
				this.c_h = this.c_texture.h;
				if(this.c_use_pivot) {
					this.c_pivotX = this.c_texture.pivotX;
					this.c_pivotY = this.c_texture.pivotY;
					this.apply_transform();
				} else {
					this.update_bounds();
				}
				this.event_vischange();
			} else {
				this.c_w = this.c_h = 0;
			}
		}
		return val;
	}
	,get_useTexturePivot: function() {
		return this.c_use_pivot;
	}
	,set_useTexturePivot: function(val) {
		if(val && this.c_texture != null) {
			this.c_pivotX = this.c_texture.pivotX;
			this.c_pivotY = this.c_texture.pivotY;
			this.apply_transform();
		}
		return this.c_use_pivot = val;
	}
	,get_w: function() {
		return this.c_w * this.c_scaleX;
	}
	,set_w: function(val) {
		var scale = val / this.c_w;
		if(scale != this.c_scaleX) {
			this.c_scaleX = scale;
			this.apply_transform();
		}
		return val;
	}
	,get_h: function() {
		return this.c_h * this.c_scaleY;
	}
	,set_h: function(val) {
		var scale = val / this.c_h;
		if(scale != this.c_scaleY) {
			this.c_scaleY = scale;
			this.apply_transform();
		}
		return val;
	}
	,__class__: Sprite
});
var Ghost = function(x,y) {
	this.speedX = Math.random() * 250 + 100;
	this.speedY = Math.random() * 100 + 100;
	var left = Math.random() > .5;
	if(left) {
		this.speedX *= -1.0;
	}
	if(Math.random() > .5) {
		this.speedY *= -1.0;
	}
	Sprite.call(this,Res.getTexture("ghost"),x,y,left ? -1.0 : 1.0,1.0,false);
	this.anchor(.5,.5);
};
Ghost.__name__ = true;
Ghost.__super__ = Sprite;
Ghost.prototype = $extend(Sprite.prototype,{
	__class__: Ghost
});
var HxOverrides = function() { };
HxOverrides.__name__ = true;
HxOverrides.strDate = function(s) {
	var _g = s.length;
	switch(_g) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d["setTime"](0);
		d["setUTCHours"](k[0]);
		d["setUTCMinutes"](k[1]);
		d["setUTCSeconds"](k[2]);
		return d;
	case 10:
		var k1 = s.split("-");
		return new Date(k1[0],k1[1] - 1,k1[2],0,0,0);
	case 19:
		var k2 = s.split(" ");
		var y = k2[0].split("-");
		var t = k2[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw new js__$Boot_HaxeError("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
var Main = function() { };
Main.__name__ = true;
Main.main = function() {
	App.start("byteware_bitmapmask",480,640,480,640);
	App.onStarted.on(Main.preload,0);
};
Main.preload = function() {
	Res.addTexture("back_0","back_0.png");
	Res.addTexture("back_1","back_1.png");
	Res.addTexture("ghost","ghost.png");
	Res.addTexture("mask","mask.png");
	Res.load(Main.precache);
};
Main.precache = function() {
	Main.back_0 = new Sprite(Res.getTexture("back_0"));
	App.root.addChild(Main.back_0);
	Main.cont = new DisplayContainer();
	App.root.addChild(Main.cont);
	Main.back_1 = new Sprite(Res.getTexture("back_1"));
	Main.cont.addChild(Main.back_1);
	Main.mask = new byteware_graphics_Mask(Res.getTexture("mask"),App.WIDTH * .5,App.HEIGHT * .5,1.0,1.0,false);
	Main.mask.anchor(.5,.5);
	Main.cont.set_mask(Main.mask);
	var i = 64;
	while(--i > -1) Main.addGhost();
	var inverted = false;
	App.root.get_onTouchEnd().on(function() {
		inverted = !inverted;
		Main.mask.set_isInverted(inverted);
	});
	App.ticker.add(Main.update);
};
Main.update = function(delta) {
	var tmp = Main;
	Main.mask.c_scaleX = 1.0 + Math.cos(tmp.mask_coef_0 += delta * 4) * .25;
	var tmp1 = Main;
	Main.mask.c_scaleY = 1.0 + Math.sin(tmp1.mask_coef_1 += delta * 4) * .25;
	Main.mask.c_x = App.root.pointer.x;
	Main.mask.c_y = App.root.pointer.y;
	var tmp2 = Main;
	Main.mask.set_deg(-20 + Math.sin(tmp2.mask_coef_2 += delta * 4) * 40);
	var i = Main.ghosts.length;
	while(--i > -1) {
		var ghost = Main.ghosts[i];
		var x = ghost.get_x();
		var y = ghost.get_y();
		x += ghost.speedX * delta;
		y += ghost.speedY * delta;
		if(y < 0.0) {
			y = 0.0;
			ghost.speedY *= -1.0;
		} else if(y > App.HEIGHT) {
			y = App.HEIGHT;
			ghost.speedY *= -1.0;
		}
		if(x < 0.0) {
			x = 0.0;
			ghost.speedX *= -1.0;
			var _g = ghost;
			_g.set_scaleX(_g.get_scaleX() * -1.0);
		} else if(x > App.WIDTH) {
			x = App.WIDTH;
			ghost.speedX *= -1.0;
			var _g1 = ghost;
			_g1.set_scaleX(_g1.get_scaleX() * -1.0);
		}
		ghost.pos(x,y);
	}
};
Main.addGhost = function() {
	var x = Math.random() * App.WIDTH;
	var y = Math.random() * App.HEIGHT;
	var ghost = new Ghost(x,y);
	Main.ghosts.push(ghost);
	Main.cont.addChild(ghost);
};
Math.__name__ = true;
var MathTools = function() { };
MathTools.__name__ = true;
MathTools.distf = function(x0,y0,x1,y1) {
	var a = x1 - x0;
	var b = y1 - y0;
	return Math.sqrt(a * a + b * b);
};
MathTools.rad = function(x0,y0,x1,y1) {
	return Math.atan2(y0 - y1,x0 - x1);
};
MathTools.deg = function(x0,y0,x1,y1) {
	return Math.atan2(y0 - y1,x0 - x1) * 180.0 / 3.141592653589793;
};
MathTools.normalize_rad = function(angle) {
	angle %= 6.28318530718;
	if(angle < -3.1415926535897931) {
		angle += 6.28318530718;
	}
	if(angle > 3.141592653589793) {
		angle -= 6.28318530718;
	}
	return angle;
};
MathTools.normalize_deg = function(angle) {
	angle %= 360.0;
	if(angle < 0) {
		angle += 360.0;
	}
	if(angle > 360.0) {
		angle -= 360.0;
	}
	return angle;
};
MathTools.rad2deg = function(angle) {
	return angle * 180.0 / 3.141592653589793;
};
MathTools.deg2rad = function(angle) {
	return angle * 3.141592653589793 / 180.0;
};
MathTools.absf = function(a) {
	if(a < 0.0) {
		return -a;
	} else {
		return a;
	}
};
MathTools.difff = function(a,b) {
	if(a > b) {
		return a - b;
	} else {
		return b - a;
	}
};
MathTools.clampf = function(a,min,max) {
	if(a < min) {
		return min;
	} else if(a > max) {
		return max;
	} else {
		return a;
	}
};
MathTools.isEvenf = function(a) {
	return a % 2 == 0;
};
MathTools.isOddf = function(a) {
	return a % 2 != 0;
};
MathTools.absi = function(a) {
	if(a < 0) {
		return -a;
	} else {
		return a;
	}
};
MathTools.diffi = function(a,b) {
	if(a > b) {
		return a - b;
	} else {
		return b - a;
	}
};
MathTools.clampi = function(a,min,max) {
	if(a < min) {
		return min;
	} else if(a > max) {
		return max;
	} else {
		return a;
	}
};
MathTools.isEveni = function(a) {
	return (a & 1) == 0;
};
MathTools.isOddi = function(a) {
	return (a & 1) != 0;
};
MathTools.isPow2 = function(a) {
	if(a > 0) {
		return (a & a - 1) == 0;
	} else {
		return false;
	}
};
MathTools.nextPow2 = function(a) {
	var b = a - 1;
	b |= b >> 1;
	b |= b >> 2;
	b |= b >> 4;
	b |= b >> 8;
	b |= b >> 16;
	return b + 1;
};
MathTools.min2f = function(a,b) {
	if(a < b) {
		return a;
	} else {
		return b;
	}
};
MathTools.max2f = function(a,b) {
	if(a > b) {
		return a;
	} else {
		return b;
	}
};
MathTools.min3f = function(a,b,c) {
	if(a < b) {
		if(a < c) {
			return a;
		} else {
			return c;
		}
	} else if(b < c) {
		return b;
	} else {
		return c;
	}
};
MathTools.max3f = function(a,b,c) {
	if(a > b) {
		if(a > c) {
			return a;
		} else {
			return c;
		}
	} else if(b > c) {
		return b;
	} else {
		return c;
	}
};
MathTools.min4f = function(a,b,c,d) {
	var e = a < b ? a : b;
	var f = c < d ? c : d;
	if(e < f) {
		return e;
	} else {
		return f;
	}
};
MathTools.max4f = function(a,b,c,d) {
	var e = a > b ? a : b;
	var f = c > d ? c : d;
	if(e > f) {
		return e;
	} else {
		return f;
	}
};
MathTools.min2i = function(a,b) {
	if(a < b) {
		return a;
	} else {
		return b;
	}
};
MathTools.max2i = function(a,b) {
	if(a > b) {
		return a;
	} else {
		return b;
	}
};
MathTools.min3i = function(a,b,c) {
	if(a < b) {
		if(a < c) {
			return a;
		} else {
			return c;
		}
	} else if(b < c) {
		return b;
	} else {
		return c;
	}
};
MathTools.max3i = function(a,b,c) {
	if(a > b) {
		if(a > c) {
			return a;
		} else {
			return c;
		}
	} else if(b > c) {
		return b;
	} else {
		return c;
	}
};
MathTools.min4i = function(a,b,c,d) {
	var e = a < b ? a : b;
	var f = c < d ? c : d;
	if(e < f) {
		return e;
	} else {
		return f;
	}
};
MathTools.max4i = function(a,b,c,d) {
	var e = a > b ? a : b;
	var f = c > d ? c : d;
	if(e > f) {
		return e;
	} else {
		return f;
	}
};
var Reflect = function() { };
Reflect.__name__ = true;
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( e ) {
		return null;
	}
};
var ReflectTools = function() { };
ReflectTools.__name__ = true;
ReflectTools.call = function(method,args) {
	if(method == null) {
		return false;
	}
	method.apply(method,args);
	return true;
};
ReflectTools.hasField = function(object,field) {
	if(Object.prototype.hasOwnProperty.call(object,field)) {
		return !(object.__properties__ && object.__properties__["set_" + field]);
	} else {
		return false;
	}
};
var Res = function() { };
Res.__name__ = true;
Res.create_asset_pack = function(name) {
	if(name == null) {
		name = "default";
	}
	var _this = Res.g_base_packs;
	var assetPack = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(assetPack == null) {
		assetPack = new byteware_assets_AssetPack(name);
		var _this1 = Res.g_base_packs;
		if(__map_reserved[name] != null) {
			_this1.setReserved(name,assetPack);
		} else {
			_this1.h[name] = assetPack;
		}
	}
	return assetPack;
};
Res.create_asset = function(name,path,type,pack,remove) {
	var assetPack = Res.create_asset_pack(pack);
	var assetInfo = new byteware_assets_AssetInfo(name,path,type);
	assetInfo.flag_remove_entry = remove;
	assetPack.add(assetInfo);
};
Res.load = function(onComplete,onProgress) {
	var key = Res.g_base_packs.keys();
	while(key.hasNext()) {
		var key1 = key.next();
		var _this = Res.g_base_packs;
		(__map_reserved[key1] != null ? _this.getReserved(key1) : _this.h[key1]).load_assets(null);
	}
	return App.platform.get_loader().start(onComplete,onProgress);
};
Res.loadAssetPack = function(name,onComplete,onProgress) {
	var _this = Res.g_base_packs;
	var assetPack = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(assetPack != null) {
		assetPack.load_assets(null);
	}
	return App.platform.get_loader().start(onComplete,onProgress);
};
Res.loadAssetPacks = function(names,onComplete,onProgress) {
	var i = -1;
	var ii = names.length;
	while(++i < ii) {
		var _this = Res.g_base_packs;
		var key = names[i];
		var assetPack = __map_reserved[key] != null ? _this.getReserved(key) : _this.h[key];
		if(assetPack != null) {
			assetPack.load_assets(null);
		}
	}
	return App.platform.get_loader().start(onComplete,onProgress);
};
Res.getAssetPack = function(name) {
	var _this = Res.g_base_packs;
	if(__map_reserved[name] != null) {
		return _this.getReserved(name);
	} else {
		return _this.h[name];
	}
};
Res.getAssetPacks = function(names) {
	var result = [];
	var i = -1;
	var ii = names.length;
	while(++i < ii) {
		var _this = Res.g_base_packs;
		var key = names[i];
		var assetPack = __map_reserved[key] != null ? _this.getReserved(key) : _this.h[key];
		if(assetPack != null) {
			result.push(assetPack);
		}
	}
	return result;
};
Res.removeAssetPack = function(name) {
	var _this = Res.g_base_packs;
	var assetPack = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(assetPack == null) {
		return false;
	} else {
		assetPack.dispose();
		Res.g_base_packs.remove(name);
	}
	return true;
};
Res.removeAssetPacks = function(names) {
	var result = true;
	var i = -1;
	var ii = names.length;
	while(++i < ii) if(!Res.removeAssetPack(names[i])) {
		result = false;
	}
	return result;
};
Res.addTexture = function(name,path,asset_pack) {
	var _this = Res.g_base_textures;
	var prev = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(prev != null && prev.info != null && prev.info.path == path) {
		return false;
	}
	Res.create_asset(name,path,byteware_assets_AssetType.TEXTURE,asset_pack,false);
	return true;
};
Res.getTexture = function(name) {
	var _this = Res.g_base_textures;
	var textureAsset = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(textureAsset == null) {
		return null;
	} else {
		return textureAsset.texture;
	}
};
Res.setTexture = function(name,asset,overwrite) {
	if(overwrite == null) {
		overwrite = true;
	}
	var _this = Res.g_base_textures;
	var prev = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(prev != null) {
		if(overwrite) {
			Res.removeTexture(name,true);
		} else {
			return false;
		}
	}
	var _this1 = Res.g_base_textures;
	if(__map_reserved[name] != null) {
		_this1.setReserved(name,asset);
	} else {
		_this1.h[name] = asset;
	}
	if(asset.info != null) {
		asset.info.name = name;
	}
	return true;
};
Res.removeTexture = function(name,dispose) {
	if(dispose == null) {
		dispose = true;
	}
	var _this = Res.g_base_textures;
	var textureAsset = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(textureAsset != null && dispose) {
		textureAsset.dispose();
	}
	return Res.g_base_textures.remove(name);
};
Res.addString = function(name,path,asset_pack,remove_entry,overwrite) {
	if(overwrite == null) {
		overwrite = true;
	}
	if(remove_entry == null) {
		remove_entry = true;
	}
	var tmp;
	var _this = Res.g_base_strings;
	if((__map_reserved[name] != null ? _this.getReserved(name) : _this.h[name]) != null) {
		tmp = !overwrite;
	} else {
		tmp = false;
	}
	if(tmp) {
		return false;
	}
	Res.create_asset(name,path,byteware_assets_AssetType.STRING,asset_pack,remove_entry);
	return true;
};
Res.getString = function(name,remove) {
	if(remove == null) {
		remove = true;
	}
	var _this = Res.g_base_strings;
	var stringAsset = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(remove) {
		Res.g_base_strings.remove(name);
	}
	return stringAsset;
};
Res.setString = function(name,content,overwrite) {
	if(overwrite == null) {
		overwrite = true;
	}
	var tmp;
	if(!overwrite) {
		var _this = Res.g_base_strings;
		tmp = (__map_reserved[name] != null ? _this.getReserved(name) : _this.h[name]) != null;
	} else {
		tmp = false;
	}
	if(tmp) {
		return false;
	}
	var _this1 = Res.g_base_strings;
	if(__map_reserved[name] != null) {
		_this1.setReserved(name,content);
	} else {
		_this1.h[name] = content;
	}
	return true;
};
Res.removeString = function(name) {
	return Res.g_base_strings.remove(name);
};
Res.addSound = function(name,path,asset_pack) {
	var _this = Res.g_base_sounds;
	var prev = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(prev != null && prev.info != null && prev.info.path == path) {
		return false;
	}
	Res.create_asset(name,path,byteware_assets_AssetType.SOUND,asset_pack,false);
	return true;
};
Res.getSound = function(name) {
	var _this = Res.g_base_sounds;
	if(__map_reserved[name] != null) {
		return _this.getReserved(name);
	} else {
		return _this.h[name];
	}
};
Res.setSound = function(name,asset,overwrite) {
	if(overwrite == null) {
		overwrite = true;
	}
	var _this = Res.g_base_sounds;
	var prev = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(prev != null) {
		if(overwrite) {
			Res.removeSound(name,true);
		} else {
			return false;
		}
	}
	var _this1 = Res.g_base_sounds;
	if(__map_reserved[name] != null) {
		_this1.setReserved(name,asset);
	} else {
		_this1.h[name] = asset;
	}
	if(asset.info != null) {
		asset.info.name = name;
	}
	return true;
};
Res.removeSound = function(name,dispose) {
	if(dispose == null) {
		dispose = true;
	}
	var _this = Res.g_base_sounds;
	var soundAsset = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	if(soundAsset != null && dispose) {
		soundAsset.dispose();
	}
	return Res.g_base_sounds.remove(name);
};
var SFX = function() { };
SFX.__name__ = true;
SFX.createMixerChannel = function(name,global,multi_sample) {
	if(multi_sample == null) {
		multi_sample = true;
	}
	if(global == null) {
		global = false;
	}
	if(name == null) {
		name = "channel";
	}
	var valid_name = name;
	var valid_from = 1;
	var validator = function(channel_name) {
		var i = -1;
		while(++i < SFX.numChannels) if(SFX.g_base_channels[i].name == channel_name) {
			return false;
		}
		return true;
	};
	while(!validator(valid_name)) valid_name = name + valid_from++;
	var id = SFX.numChannels++;
	var mixerChannel = multi_sample ? new byteware_media_MixerChannel(valid_name,global) : new byteware_media_SingleTrackChannel(valid_name,global);
	mixerChannel.id = id;
	SFX.g_base_channels[id] = mixerChannel;
	return id;
};
SFX.getMixerChannelAt = function(id) {
	return SFX.g_base_channels[id];
};
SFX.getMixerChannel = function(name) {
	var mixerChannel = null;
	var i = -1;
	while(++i < SFX.numChannels) {
		mixerChannel = SFX.g_base_channels[i];
		if(mixerChannel.name == name) {
			return mixerChannel;
		}
	}
	return null;
};
SFX.stopMixerChannelAt = function(id) {
	var mixerChannel = SFX.g_base_channels[id];
	if(mixerChannel == null) {
		return false;
	} else {
		mixerChannel.stop();
	}
	return true;
};
SFX.stopMixerChannelsAt = function(from,to) {
	if(from == null) {
		from = 0;
	}
	if(from < 0) {
		from = 0;
	}
	if(to == null || to >= SFX.numChannels) {
		to = SFX.numChannels - 1;
	}
	while(from <= to) {
		SFX.g_base_channels[from].stop();
		++from;
	}
};
SFX.stopMixerChannel = function(name) {
	var mixerChannel = SFX.getMixerChannel(name);
	if(mixerChannel == null) {
		return false;
	} else {
		mixerChannel.stop();
	}
	return true;
};
SFX.play = function(name,vol,loop,channel,onComplete,onCompleteArgs) {
	if(channel == null) {
		channel = 1;
	}
	if(loop == null) {
		loop = false;
	}
	if(vol == null) {
		vol = 1.0;
	}
	var _this = SFX.g_base_sounds;
	var sound = __map_reserved[name] != null ? _this.getReserved(name) : _this.h[name];
	var mixerChannel = channel < 0 || channel >= SFX.numChannels ? SFX.g_base_channels[1] : SFX.g_base_channels[channel];
	return mixerChannel.play(sound,vol,loop,onComplete,onCompleteArgs);
};
SFX.playTrack = function(track,vol,loop,channel,onComplete,onCompleteArgs) {
	if(channel == null) {
		channel = 2;
	}
	if(loop == null) {
		loop = true;
	}
	if(vol == null) {
		vol = 1.0;
	}
	return SFX.play(track,vol,loop,channel,onComplete,onCompleteArgs);
};
SFX.stopTrack = function() {
	SFX.g_base_channels[2].stop();
};
SFX.init = function() {
	SFX.g_base_channels = [];
	SFX.g_base_volume = new haxe_ds_StringMap();
	SFX.g_base_sounds = Res.g_base_sounds;
	SFX.createMixerChannel("master",true,true);
	SFX.createMixerChannel("sound",false,true);
	SFX.createMixerChannel("music",false,false);
};
SFX.event_activate = function(state) {
	var i = -1;
	while(++i < SFX.numChannels) SFX.g_base_channels[i].event_activate(state);
};
SFX.event_pause = function(state) {
	var i = -1;
	while(++i < SFX.numChannels) {
		var mixerChannel = SFX.g_base_channels[i];
	}
};
var Std = function() { };
Std.__name__ = true;
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.parseInt = function(x) {
	var v = parseInt(x,10);
	if(v == 0 && (HxOverrides.cca(x,1) == 120 || HxOverrides.cca(x,1) == 88)) {
		v = parseInt(x);
	}
	if(isNaN(v)) {
		return null;
	}
	return v;
};
var byteware_RootContainer = function(w,h) {
	DisplayContainer.call(this);
	this.root_w = w;
	this.root_h = h;
};
byteware_RootContainer.__name__ = true;
byteware_RootContainer.__super__ = DisplayContainer;
byteware_RootContainer.prototype = $extend(DisplayContainer.prototype,{
	render: function(context,offsetX,offsetY) {
		var i = -1;
		while(++i < this.numChildren) this.c_children[i].render(context,0,0);
	}
	,submitTouch: function(id,x,y,state) {
		this.c_mat.inv_transformCoords(x,y,this.pointer);
		var object = null;
		var i = this.numChildren;
		while(--i > -1) {
			object = this.c_children[i].submit_touch(this.pointer.x,this.pointer.y,state);
			if(object != null) {
				break;
			}
		}
		switch(state[1]) {
		case 0:
			if(object != null) {
				object.event_touch_begin();
			}
			this.event_touch_begin();
			break;
		case 1:
			if(object != null) {
				object.event_touch_move();
			}
			this.event_touch_move();
			break;
		case 2:
			if(object != null) {
				object.event_touch_over();
			}
			this.event_touch_over();
			break;
		case 3:
			if(object != null) {
				object.event_touch_end();
			}
			this.event_touch_end();
			break;
		}
		return true;
	}
	,addChildAt: function(child,index) {
		if(index < 0) {
			index = 0;
		} else if(index > this.numChildren) {
			index = this.numChildren;
		}
		if(child.parent == this) {
			this.setChildIndex(child,index);
		} else {
			if(child.parent != null) {
				child.parent.removeChild(child);
			}
			this.c_children.splice(index,0,child);
			child.parent = this;
			this.numChildren++;
			child.event_added();
			this.update_bounds();
			this.event_vischange();
		}
		return child;
	}
	,__class__: byteware_RootContainer
});
var byteware_Ticker = function(global,disposable) {
	if(disposable == null) {
		disposable = true;
	}
	if(global == null) {
		global = false;
	}
	this.isGlobal = global;
	this.isDisposable = disposable;
	this.delta = 0.0;
	this.c_coef = 1.0;
	this.clear();
	this.c_paused = this.c_manual = false;
	byteware_Ticker.g_base[byteware_Ticker.numTickers++] = this;
};
byteware_Ticker.__name__ = true;
byteware_Ticker.event_update = function() {
	byteware_Ticker.g_curr = new Date().getTime() / 1000;
	byteware_Ticker.globalDelta = ((byteware_Ticker.g_curr - byteware_Ticker.g_prev) * 1000 | 0) * .001 * byteware_Ticker.g_coef;
	byteware_Ticker.g_prev = byteware_Ticker.g_curr;
	if(byteware_Ticker.globalDelta < 0.0 || byteware_Ticker.globalDelta > 1.0) {
		byteware_Ticker.globalDelta = 0.0;
	}
	var i = -1;
	while(++i < byteware_Ticker.numTickers) byteware_Ticker.g_base[i].update();
};
byteware_Ticker.event_pause = function(state) {
	if(state) {
		var i = -1;
		while(++i < byteware_Ticker.numTickers) {
			var ticker = byteware_Ticker.g_base[i];
			if(!ticker.isGlobal) {
				ticker.c_paused = true;
			}
		}
	} else {
		var i1 = -1;
		while(++i1 < byteware_Ticker.numTickers) {
			var ticker1 = byteware_Ticker.g_base[i1];
			ticker1.c_paused = ticker1.c_manual;
		}
	}
};
byteware_Ticker.event_clear = function() {
	var i = byteware_Ticker.numTickers;
	while(--i > -1) {
		var ticker = byteware_Ticker.g_base[i];
		if(ticker.isDisposable) {
			ticker.dispose();
		}
	}
};
byteware_Ticker.normalize = function() {
	byteware_Ticker.g_curr = byteware_Ticker.g_prev = new Date().getTime() / 1000;
};
byteware_Ticker.get_globalScale = function() {
	return byteware_Ticker.g_coef;
};
byteware_Ticker.set_globalScale = function(val) {
	if(val < 0.0) {
		val *= -1.0;
	}
	return byteware_Ticker.g_coef = val;
};
byteware_Ticker.prototype = {
	add: function(func) {
		var valid = this.c_base.indexOf(func) == -1;
		if(valid) {
			this.c_base[this.numFunctions++] = func;
		}
		return valid;
	}
	,remove: function(func) {
		var i = this.c_base.indexOf(func);
		if(i != -1) {
			this.c_base.splice(i,1);
			this.numFunctions--;
			return true;
		}
		return false;
	}
	,clear: function() {
		if(this.numFunctions <= 0) {
			return false;
		}
		this.c_base = [];
		this.numFunctions = 0;
		return true;
	}
	,dispose: function() {
		var i = byteware_Ticker.g_base.indexOf(this);
		if(i != -1) {
			byteware_Ticker.g_base.splice(i,1);
			byteware_Ticker.numTickers--;
			this.c_base = null;
			this.numFunctions = -1;
		}
	}
	,update: function() {
		this.delta = byteware_Ticker.globalDelta * this.c_coef;
		if(!this.c_paused) {
			var i = -1;
			while(++i < this.numFunctions) this.c_base[i](this.delta);
		}
	}
	,get_isPaused: function() {
		return this.c_manual;
	}
	,set_isPaused: function(val) {
		return this.c_paused = this.c_manual = val;
	}
	,get_scale: function() {
		return this.c_coef;
	}
	,set_scale: function(val) {
		if(val < 0.0) {
			val *= -1.0;
		}
		return this.c_coef = val;
	}
	,__class__: byteware_Ticker
};
var byteware_assets_Asset = function() {
	this.isLoaded = false;
};
byteware_assets_Asset.__name__ = true;
byteware_assets_Asset.prototype = {
	upload: function(data) {
		return false;
	}
	,reload: function() {
		if(this.info == null) {
			return false;
		} else {
			App.platform.get_loader().add(this.info);
		}
		return true;
	}
	,unload: function() {
		return false;
	}
	,dispose: function() {
		if(this.e_dispose != null) {
			this.e_dispose.dispatch(false,false);
		}
		this.unload();
		if(this.info != null) {
			this.info.pack.remove(this.info);
			this.info.root = null;
			this.info = null;
		}
		this.e_reloaded = null;
		this.e_dispose = null;
	}
	,get_onReloaded: function() {
		if(this.e_reloaded == null) {
			this.e_reloaded = new tofu_events_Event0(false,false);
		}
		return this.e_reloaded;
	}
	,get_onDispose: function() {
		if(this.e_dispose == null) {
			this.e_dispose = new tofu_events_Event0(false,false);
		}
		return this.e_dispose;
	}
	,__class__: byteware_assets_Asset
};
var byteware_assets_AssetInfo = function(asset_name,asset_path,asset_type) {
	this.name = asset_name;
	this.path = asset_path;
	this.type = asset_type;
	this.pack = null;
	this.root = null;
	this.flag_remove_entry = false;
};
byteware_assets_AssetInfo.__name__ = true;
byteware_assets_AssetInfo.prototype = {
	__class__: byteware_assets_AssetInfo
};
var byteware_assets_AssetPack = function(pack_name) {
	this.name = pack_name;
	this.numAssets = 0;
	this.c_base = [];
};
byteware_assets_AssetPack.__name__ = true;
byteware_assets_AssetPack.prototype = {
	dispose: function() {
		this.unload_assets(null);
		this.c_base = null;
		this.numAssets = -1;
	}
	,add: function(info) {
		if(this.c_base.indexOf(info) == -1) {
			if(info.pack != null) {
				info.pack.remove(info);
			}
			this.c_base[this.numAssets++] = info;
			info.pack = this;
			return true;
		}
		return false;
	}
	,get: function(name,type) {
		var i = -1;
		while(++i < this.numAssets) {
			var info = this.c_base[i];
			if(info.name == name && info.type == type) {
				return info;
			}
		}
		return null;
	}
	,exists: function(name,type) {
		return this.get(name,type) != null;
	}
	,remove: function(info) {
		var i = this.c_base.indexOf(info);
		if(i != -1) {
			info.pack = null;
			this.c_base.splice(i,1);
			this.numAssets--;
			return true;
		}
		return false;
	}
	,removeTextures: function() {
		return this.remove_assets(byteware_assets_AssetType.TEXTURE);
	}
	,removeStrings: function() {
		return this.remove_assets(byteware_assets_AssetType.STRING);
	}
	,removeSounds: function() {
		return this.remove_assets(byteware_assets_AssetType.SOUND);
	}
	,removeAll: function() {
		return this.remove_assets(null);
	}
	,loadAll: function() {
		return this.load_assets(null);
	}
	,loadTextures: function() {
		return this.load_assets(byteware_assets_AssetType.TEXTURE);
	}
	,loadStrings: function() {
		return this.load_assets(byteware_assets_AssetType.STRING);
	}
	,loadSounds: function() {
		return this.load_assets(byteware_assets_AssetType.SOUND);
	}
	,reloadAll: function() {
		return this.reload_assets(null);
	}
	,reloadTextures: function() {
		return this.reload_assets(byteware_assets_AssetType.TEXTURE);
	}
	,reloadStrings: function() {
		return this.load_assets(byteware_assets_AssetType.STRING);
	}
	,reloadSounds: function() {
		return this.reload_assets(byteware_assets_AssetType.SOUND);
	}
	,unloadAll: function() {
		return this.unload_assets(null);
	}
	,unloadTextures: function() {
		return this.unload_assets(byteware_assets_AssetType.TEXTURE);
	}
	,unloadSounds: function() {
		return this.unload_assets(byteware_assets_AssetType.SOUND);
	}
	,remove_assets: function(type) {
		var result = false;
		var i = this.numAssets;
		while(--i > -1) {
			var info = this.c_base[i];
			if(type == null || type == info.type) {
				switch(type[1]) {
				case 0:
					break;
				case 1:
					Res.removeString(info.name);
					break;
				case 2:
					break;
				}
				this.remove(info);
			}
		}
		return result;
	}
	,load_assets: function(type) {
		var result = false;
		var i = -1;
		while(++i < this.numAssets) {
			var info = this.c_base[i];
			if(type == null || type == info.type) {
				if(info.root == null || !info.root.isLoaded) {
					App.platform.get_loader().add(info);
					result = true;
				}
			}
		}
		return result;
	}
	,reload_assets: function(type) {
		var result = false;
		var i = -1;
		while(++i < this.numAssets) {
			var info = this.c_base[i];
			if(type == null || type == info.type) {
				if(info.root != null && info.root.isLoaded) {
					App.platform.get_loader().add(info);
					result = true;
				}
			}
		}
		return result;
	}
	,unload_assets: function(type) {
		var result = false;
		var i = -1;
		while(++i < this.numAssets) {
			var info = this.c_base[i];
			if(info.root != null && info.root.unload()) {
				result = true;
			}
		}
		return result;
	}
	,get_isLoaded: function() {
		return this.get_numLoaded() == this.numAssets;
	}
	,get_numLoaded: function() {
		var result = 0;
		var i = -1;
		while(++i < this.numAssets) {
			var info = this.c_base[i];
			if(info.root != null && info.root.isLoaded) {
				++result;
			}
		}
		return result;
	}
	,__class__: byteware_assets_AssetPack
};
var byteware_assets_AssetType = { __ename__ : true, __constructs__ : ["TEXTURE","STRING","SOUND"] };
byteware_assets_AssetType.TEXTURE = ["TEXTURE",0];
byteware_assets_AssetType.TEXTURE.__enum__ = byteware_assets_AssetType;
byteware_assets_AssetType.STRING = ["STRING",1];
byteware_assets_AssetType.STRING.__enum__ = byteware_assets_AssetType;
byteware_assets_AssetType.SOUND = ["SOUND",2];
byteware_assets_AssetType.SOUND.__enum__ = byteware_assets_AssetType;
var byteware_geom_Mat = function(a,b,c,d,e,f) {
	if(f == null) {
		f = 0.0;
	}
	if(e == null) {
		e = 0.0;
	}
	if(d == null) {
		d = 1.0;
	}
	if(c == null) {
		c = 0.0;
	}
	if(b == null) {
		b = 0.0;
	}
	if(a == null) {
		a = 1.0;
	}
	this.set(a,b,c,d,e,f);
};
byteware_geom_Mat.__name__ = true;
byteware_geom_Mat.prototype = {
	set: function(a,b,c,d,e,f) {
		if(f == null) {
			f = 0.0;
		}
		if(e == null) {
			e = 0.0;
		}
		if(d == null) {
			d = 1.0;
		}
		if(c == null) {
			c = 0.0;
		}
		if(b == null) {
			b = 0.0;
		}
		if(a == null) {
			a = 1.0;
		}
		this.a = a;
		this.b = b;
		this.c = c;
		this.d = d;
		this.e = e;
		this.f = f;
	}
	,copy: function(to) {
		if(to == null) {
			to = new byteware_geom_Mat(this.a,this.b,this.c,this.d,this.e,this.f);
		} else {
			to.set(this.a,this.b,this.c,this.d,this.e,this.f);
		}
		return to;
	}
	,translate: function(x,y) {
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		this.e += x;
		this.f += y;
	}
	,scale: function(x,y) {
		if(y == null) {
			y = 1.0;
		}
		if(x == null) {
			x = 1.0;
		}
		this.a *= x;
		this.b *= y;
		this.c *= x;
		this.d *= y;
		this.e *= x;
		this.f *= y;
	}
	,skew: function(x,y) {
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		var sin_x = Math.sin(x);
		var cos_x = Math.cos(x);
		var sin_y = Math.sin(y);
		var cos_y = Math.cos(y);
		this.set(this.a * cos_y - this.b * sin_x,this.a * sin_y + this.b * cos_x,this.c * cos_y - this.d * sin_x,this.c * sin_y + this.d * cos_x,this.e * cos_y - this.f * sin_x,this.e * sin_y + this.f * cos_x);
	}
	,multiply: function(mat) {
		var x = this.a * mat.a + this.c * mat.b;
		var y = this.a * mat.c + this.c * mat.d;
		var z = this.a * mat.e + this.c * mat.f + this.e;
		this.a = x;
		this.c = y;
		this.e = z;
		x = this.b * mat.a + this.d * mat.b;
		y = this.b * mat.c + this.d * mat.d;
		z = this.b * mat.e + this.d * mat.f + this.f;
		this.b = x;
		this.d = y;
		this.f = z;
	}
	,invert: function(to) {
		var det = this.a * this.d - this.c * this.b;
		if(det == 0.0) {
			return false;
		}
		if(to == null) {
			this.set(this.d / det,-this.c / det,-this.b / det,this.a / det,(this.c * this.f - this.d * this.e) / det,(this.b * this.e - this.a * this.f) / det);
		} else {
			to.set(this.d / det,-this.c / det,-this.b / det,this.a / det,(this.c * this.f - this.d * this.e) / det,(this.b * this.e - this.a * this.f) / det);
		}
		return true;
	}
	,rotate_deg: function(angle) {
		var cos = Math.cos(angle);
		var sin = Math.sin(angle);
		var a1 = this.a * cos - this.b * sin;
		this.b = this.a * sin + this.b * cos;
		this.a = a1;
		var c1 = this.c * cos - this.d * sin;
		this.d = this.c * sin + this.d * cos;
		this.c = c1;
		var e1 = this.e * cos - this.f * sin;
		this.f = this.e * sin + this.f * cos;
		this.e = e1;
	}
	,rotate_rad: function(angle) {
		this.rotate_deg(angle * 180.0 / 3.141592653589793);
	}
	,determinant: function() {
		return this.a * this.d - this.c * this.b;
	}
	,transformCoords: function(x,y,to) {
		var pos_x = this.a * x + this.c * y + this.e;
		var pos_y = this.d * y + this.b * x + this.f;
		if(to == null) {
			to = new byteware_geom_Pos(pos_x,pos_y);
		} else {
			to.set(pos_x,pos_y);
		}
		return to;
	}
	,inv_transformCoords: function(x,y,to) {
		if(to == null) {
			to = new byteware_geom_Pos(x,y);
		} else {
			to.set(x,y);
		}
		var det = this.determinant();
		if(det == 0.0) {
			return to;
		}
		x -= this.e;
		y -= this.f;
		to.x = (x * this.d - y * this.c) / det;
		to.y = (y * this.a - x * this.b) / det;
		return to;
	}
	,transformPos: function(pos,to) {
		this.transformCoords(pos.x,pos.y,to == null ? pos : to);
	}
	,inv_transformPos: function(pos,to) {
		this.inv_transformCoords(pos.x,pos.y,to == null ? pos : to);
	}
	,transformRect: function(rect,to) {
		var x0 = this.a * rect.x + this.c * rect.y;
		var x1 = x0;
		var y0 = this.b * rect.x + this.d * rect.y;
		var y1 = y0;
		var x = this.a * rect.get_r() + this.c * rect.y;
		var y = this.b * rect.get_r() + this.d * rect.y;
		if(x < x0) {
			x0 = x;
		}
		if(x > x1) {
			x1 = x;
		}
		if(y < y0) {
			y0 = y;
		}
		if(y > y1) {
			y1 = y;
		}
		x = this.a * rect.get_r() + this.c * rect.get_b();
		y = this.b * rect.get_r() + this.d * rect.get_b();
		if(x < x0) {
			x0 = x;
		}
		if(x > x1) {
			x1 = x;
		}
		if(y < y0) {
			y0 = y;
		}
		if(y > y1) {
			y1 = y;
		}
		x = this.a * rect.x + this.c * rect.get_b();
		y = this.b * rect.x + this.d * rect.get_b();
		if(x < x0) {
			x0 = x;
		}
		if(x > x1) {
			x1 = x;
		}
		if(y < y0) {
			y0 = y;
		}
		if(y > y1) {
			y1 = y;
		}
		if(to == null) {
			rect.set(x0 + this.e,y0 + this.f,x1 - x0,y1 - y0);
		} else {
			to.set(x0 + this.e,y0 + this.f,x1 - x0,y1 - y0);
		}
	}
	,transformArray: function(array,lenght,to) {
		if(to == null) {
			to = array;
		}
		var i = 0;
		while(i < lenght) {
			var x = array[i];
			var y = array[i + 1];
			to[i++] = x * this.a + y * this.c + this.e;
			to[i++] = x * this.b + y * this.d + this.f;
		}
	}
	,toString: function() {
		return "matrix(" + this.a + ", " + this.b + ", " + this.c + ", " + this.d + ", " + this.e + ", " + this.f + ")";
	}
	,__class__: byteware_geom_Mat
};
var byteware_geom_Pos = function(x,y) {
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	this.set(x,y);
};
byteware_geom_Pos.__name__ = true;
byteware_geom_Pos.prototype = {
	set: function(x,y) {
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		this.x = x;
		this.y = y;
	}
	,copy: function(to) {
		if(to == null) {
			to = new byteware_geom_Pos(this.x,this.y);
		} else {
			to.set(this.x,this.y);
		}
		return to;
	}
	,__class__: byteware_geom_Pos
};
var byteware_geom_Rect = function(x,y,w,h) {
	if(h == null) {
		h = 0.0;
	}
	if(w == null) {
		w = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	this.set(x,y,w,h);
};
byteware_geom_Rect.__name__ = true;
byteware_geom_Rect.prototype = {
	set: function(x,y,w,h) {
		if(h == null) {
			h = 0.0;
		}
		if(w == null) {
			w = 0.0;
		}
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		this.x = x;
		this.y = y;
		this.w = w;
		this.h = h;
	}
	,copy: function(to) {
		if(to == null) {
			to = new byteware_geom_Rect(this.x,this.y,this.w,this.h);
		} else {
			to.set(this.x,this.y,this.w,this.h);
		}
		return to;
	}
	,align: function(to) {
		if(this.w > to.w) {
			this.x = (to.w - this.w) * .5;
		} else {
			if(this.x < to.x) {
				this.x = to.x;
			}
			if(this.get_r() > to.get_r()) {
				this.set_r(to.get_r());
			}
		}
		if(this.h > to.h) {
			this.y = (to.h - this.h) * .5;
		} else {
			if(this.y < to.y) {
				this.y = to.y;
			}
			if(this.get_b() > to.get_b()) {
				this.set_b(to.get_b());
			}
		}
	}
	,expand: function(rect) {
		if(this.w == 0.0 && this.h == 0.0) {
			this.set(rect.x,rect.y,rect.w,rect.h);
		} else {
			var cr = this.get_r();
			var cb = this.get_b();
			if(this.x > rect.x) {
				this.x = rect.x;
				this.w = cr - this.x;
			}
			if(this.y > rect.y) {
				this.y = rect.y;
				this.h = cb - this.y;
			}
			if(cr < rect.x + rect.w) {
				this.w = rect.x + rect.w - this.x;
			}
			if(cb < rect.y + rect.h) {
				this.h = rect.y + rect.h - this.y;
			}
		}
	}
	,normalize: function() {
		if(this.w < 0.0) {
			this.w = -this.w;
			this.x -= this.w;
		}
		if(this.h < 0.0) {
			this.h = -this.h;
			this.y -= this.h;
		}
	}
	,equals: function(rect) {
		if(this.x == rect.x && this.y == rect.y && this.w == rect.w) {
			return this.h == rect.h;
		} else {
			return false;
		}
	}
	,containsCoords: function(x,y) {
		if(x >= this.x && y >= this.y && x < this.get_r()) {
			return y < this.get_b();
		} else {
			return false;
		}
	}
	,containsPos: function(pos) {
		return this.containsCoords(pos.x,pos.y);
	}
	,get_l: function() {
		return this.x;
	}
	,set_l: function(val) {
		this.w -= val - this.x;
		return this.x = val;
	}
	,get_r: function() {
		return this.x + this.w;
	}
	,set_r: function(val) {
		this.w = val - this.x;
		return val;
	}
	,get_t: function() {
		return this.y;
	}
	,set_t: function(val) {
		this.h -= val - this.y;
		return this.y = val;
	}
	,get_b: function() {
		return this.y + this.h;
	}
	,set_b: function(val) {
		this.h = val - this.y;
		return val;
	}
	,__class__: byteware_geom_Rect
};
var byteware_graphics_Mask = function(texture,x,y,scaleX,scaleY,useTexturePivot) {
	if(useTexturePivot == null) {
		useTexturePivot = true;
	}
	if(scaleY == null) {
		scaleY = 1.0;
	}
	if(scaleX == null) {
		scaleX = 1.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	byteware_geom_Transform.call(this,x,y,scaleX,scaleY,0.0,0.0);
	this.c_inverted = false;
	this.c_use_pivot = useTexturePivot;
	this.set_texture(texture);
	this.id = App.platform.get_renderer().register_mask();
};
byteware_graphics_Mask.__name__ = true;
byteware_graphics_Mask.__super__ = byteware_geom_Transform;
byteware_graphics_Mask.prototype = $extend(byteware_geom_Transform.prototype,{
	dispose: function() {
		App.platform.get_renderer().unregister_mask(this.id);
	}
	,resize: function(w,h) {
		if(h == null) {
			h = 0.0;
		}
		if(w == null) {
			w = 0.0;
		}
		this.c_scaleX = w / this.c_w;
		this.c_scaleY = h / this.c_h;
		this.apply_transform();
	}
	,get_texture: function() {
		return this.c_texture;
	}
	,set_texture: function(val) {
		if(val != this.c_texture) {
			this.c_texture = val;
			if(val != null) {
				this.c_w = this.c_texture.w;
				this.c_h = this.c_texture.h;
				if(this.c_use_pivot) {
					this.c_pivotX = this.c_texture.pivotX;
					this.c_pivotY = this.c_texture.pivotY;
					this.apply_transform();
				} else {
					this.update_bounds();
				}
			} else {
				this.c_w = this.c_h = 0;
			}
		}
		return val;
	}
	,get_isInverted: function() {
		return this.c_inverted;
	}
	,set_isInverted: function(val) {
		return this.c_inverted = val;
	}
	,get_useTexturePivot: function() {
		return this.c_use_pivot;
	}
	,set_useTexturePivot: function(val) {
		if(val && this.c_texture != null) {
			this.c_pivotX = this.c_texture.pivotX;
			this.c_pivotY = this.c_texture.pivotY;
			this.apply_transform();
		}
		return this.c_use_pivot = val;
	}
	,get_w: function() {
		return this.c_w * this.c_scaleX;
	}
	,set_w: function(val) {
		var scale = val / this.c_w;
		if(scale != this.c_scaleX) {
			this.c_scaleX = scale;
			this.apply_transform();
		}
		return val;
	}
	,get_h: function() {
		return this.c_h * this.c_scaleY;
	}
	,set_h: function(val) {
		var scale = val / this.c_h;
		if(scale != this.c_scaleY) {
			this.c_scaleY = scale;
			this.apply_transform();
		}
		return val;
	}
	,__class__: byteware_graphics_Mask
});
var byteware_graphics_Texture = function(texture_asset,offset_x,offset_y,width,height,pivot_x,pivot_y) {
	this.set(texture_asset,offset_x,offset_y,width,height,pivot_x,pivot_y);
};
byteware_graphics_Texture.__name__ = true;
byteware_graphics_Texture.prototype = {
	set: function(texture_asset,offset_x,offset_y,width,height,pivot_x,pivot_y) {
		this.asset = texture_asset;
		this.x = offset_x < 0 ? 0 : offset_x;
		this.y = offset_y < 0 ? 0 : offset_y;
		this.w = width > this.asset.w ? this.asset.w : width;
		this.h = height > this.asset.h ? this.asset.h : height;
		this.pivotX = pivot_x;
		this.pivotY = pivot_y;
		this.id = -1;
	}
	,copy: function(to) {
		to = this.getTexture(0,0,this.w,this.h,this.pivotX,this.pivotY,to);
		to.id = this.id;
		return to;
	}
	,getTexture: function(offset_x,offset_y,width,height,pivot_x,pivot_y,to) {
		if(pivot_y == null) {
			pivot_y = 0.0;
		}
		if(pivot_x == null) {
			pivot_x = 0.0;
		}
		if(to == null) {
			to = new byteware_graphics_Texture(this.asset,this.x + offset_x,this.y + offset_y,width,height,pivot_x,pivot_y);
		} else {
			to.set(this.asset,this.x + offset_x,this.y + offset_y,width,height,pivot_x,pivot_y);
		}
		return to;
	}
	,__class__: byteware_graphics_Texture
};
var byteware_input_TouchState = { __ename__ : true, __constructs__ : ["BEGIN","MOVE","OVER","END"] };
byteware_input_TouchState.BEGIN = ["BEGIN",0];
byteware_input_TouchState.BEGIN.__enum__ = byteware_input_TouchState;
byteware_input_TouchState.MOVE = ["MOVE",1];
byteware_input_TouchState.MOVE.__enum__ = byteware_input_TouchState;
byteware_input_TouchState.OVER = ["OVER",2];
byteware_input_TouchState.OVER.__enum__ = byteware_input_TouchState;
byteware_input_TouchState.END = ["END",3];
byteware_input_TouchState.END.__enum__ = byteware_input_TouchState;
var byteware_media_MixerChannel = function(channel_name,global) {
	this.isGlobal = global;
	this.isMultiSample = true;
	this.id = -1;
	this.name = channel_name;
	this.numSounds = 0;
	this.c_paused = this.c_muted = this.c_stopped = false;
	this.c_vol = this.c_vol_manual = 1.0;
	this.c_fade_time = .2;
	this.c_base = [];
};
byteware_media_MixerChannel.__name__ = true;
byteware_media_MixerChannel.prototype = {
	add: function(sound) {
		var valid = this.c_base.indexOf(sound) == -1;
		if(valid) {
			if(sound.channel != null) {
				sound.channel.remove(sound);
			}
			this.c_base[this.numSounds++] = sound;
			sound.channel = this;
		}
	}
	,remove: function(sound) {
		var i = this.c_base.indexOf(sound);
		if(i != -1) {
			this.c_base.splice(i,1);
			this.numSounds--;
			sound.channel = null;
		}
	}
	,play: function(sound,vol,loop,onComplete,onCompleteArgs) {
		if(loop == null) {
			loop = false;
		}
		if(vol == null) {
			vol = 1.0;
		}
		if(sound == null || this.c_stopped) {
			return false;
		}
		this.add(sound);
		sound.play(vol,loop,onComplete,onCompleteArgs);
		return true;
	}
	,stop: function() {
		var _gthis = this;
		if(this.c_stopped) {
			return;
		}
		if(this.c_fade_time > 0.0) {
			this.c_stopped = true;
			var curr_time = 0.0;
			var curr_coef = 1.0;
			var fade = function(delta) {
				curr_time += delta;
				if(curr_time < _gthis.c_fade_time) {
					curr_coef = curr_time / _gthis.c_fade_time;
					_gthis.c_vol = _gthis.c_vol_manual * curr_coef;
					var i = _gthis.numSounds;
					while(--i > -1) _gthis.c_base[i].event_change_volume();
				} else {
					App.ticker.remove(fade);
					_gthis.c_vol = _gthis.c_vol_manual;
					_gthis.c_stopped = false;
					var i1 = _gthis.numSounds;
					while(--i1 > -1) _gthis.c_base[i1].stop();
				}
			};
			App.ticker.add(fade);
		} else {
			var i2 = this.numSounds;
			while(--i2 > -1) this.c_base[i2].stop();
		}
	}
	,event_activate: function(state) {
		if(state) {
			var i = -1;
			while(++i < this.numSounds) {
				var sound = this.c_base[i];
				sound.c_paused = sound.c_manual;
				sound.event_change_playback();
			}
		} else {
			var i1 = -1;
			while(++i1 < this.numSounds) {
				var sound1 = this.c_base[i1];
				sound1.c_paused = true;
				sound1.event_change_playback();
			}
		}
	}
	,event_pause: function(state) {
	}
	,get_isPaused: function() {
		return this.c_paused;
	}
	,set_isPaused: function(val) {
		return val;
	}
	,get_isMuted: function() {
		return this.c_muted;
	}
	,set_isMuted: function(val) {
		return val;
	}
	,get_vol: function() {
		return this.c_vol_manual;
	}
	,set_vol: function(val) {
		if(val < 0.0) {
			val = 0.0;
		} else if(val > 1.0) {
			val = 1.0;
		}
		if(val != this.c_vol_manual) {
			this.c_vol = this.c_vol_manual = val;
			var i = -1;
			while(++i < this.numSounds) this.c_base[i].event_change_volume();
		}
		return val;
	}
	,get_fadeTime: function() {
		return this.c_fade_time;
	}
	,set_fadeTime: function(val) {
		if(val < 0.0) {
			val = 0.0;
		}
		return this.c_fade_time = val;
	}
	,__class__: byteware_media_MixerChannel
};
var byteware_media_SingleTrackChannel = function(channel_name,global) {
	byteware_media_MixerChannel.call(this,channel_name,global);
	this.isMultiSample = this.c_fading = false;
	this.c_fade_time = 1.2;
	this.c_curr_sound_to = 1.0;
	this.c_curr_time = this.c_total_time = 0.0;
};
byteware_media_SingleTrackChannel.__name__ = true;
byteware_media_SingleTrackChannel.__super__ = byteware_media_MixerChannel;
byteware_media_SingleTrackChannel.prototype = $extend(byteware_media_MixerChannel.prototype,{
	play: function(sound,vol,loop,onComplete,onCompleteArgs) {
		if(loop == null) {
			loop = false;
		}
		if(vol == null) {
			vol = 1.0;
		}
		if(sound == null || sound == this.c_curr_sound) {
			return false;
		}
		if(this.c_fade_time > 0.0) {
			this.add(sound);
			this.c_curr_sound = sound;
			this.c_curr_sound_to = vol;
			this.c_total_time = this.c_fade_time;
			this.c_curr_sound.play(0.0,loop,onComplete,onCompleteArgs);
			if(!this.c_fading) {
				this.c_fading = true;
				this.c_curr_time = 0.0;
				App.ticker.add($bind(this,this.func_fade));
			}
		} else {
			if(this.c_curr_sound != null) {
				this.c_curr_sound.stop();
			}
			this.c_curr_sound = sound;
			this.add(sound);
			this.c_curr_sound.play(vol,loop,onComplete,onCompleteArgs);
		}
		return true;
	}
	,stop: function() {
		if(this.c_fade_time > 0.0) {
			this.c_curr_sound = null;
			this.c_curr_time = 0.0;
			this.c_total_time = this.c_fade_time;
			if(!this.c_fading) {
				this.c_fading = true;
				App.ticker.add($bind(this,this.func_fade));
			}
		}
	}
	,func_fade: function(delta) {
		this.c_curr_time += delta;
		if(this.c_curr_time < this.c_total_time) {
			var curr_vol = this.c_curr_time / this.c_total_time;
			var prev_vol = 1.0 - curr_vol;
			var i = this.numSounds;
			while(--i > -1) {
				var sound = this.c_base[i];
				if(sound == this.c_curr_sound) {
					sound.set_vol(this.c_curr_sound_to * curr_vol);
				} else {
					var _g = sound;
					_g.set_vol(_g.get_vol() * prev_vol);
				}
			}
		} else {
			var i1 = this.numSounds;
			while(--i1 > -1) {
				var sound1 = this.c_base[i1];
				if(sound1 == this.c_curr_sound) {
					this.c_curr_sound.set_vol(this.c_curr_sound_to);
				} else {
					sound1.stop();
				}
			}
			if(this.cf_fade_comp != null) {
				this.cf_fade_comp();
				this.cf_fade_comp = null;
			}
			App.ticker.remove($bind(this,this.func_fade));
			this.c_fading = false;
		}
	}
	,event_pause: function(state) {
		var _gthis = this;
		if(this.c_curr_sound == null) {
			return;
		}
		this.c_curr_sound_to = 0.0;
		this.c_curr_time = 0.0;
		this.c_total_time = .2;
		if(state) {
			this.cf_fade_comp = function() {
				_gthis.c_curr_sound.c_paused = true;
				_gthis.c_curr_sound.event_change_playback();
			};
		} else {
			this.c_curr_sound.c_paused = false;
			this.c_curr_sound.event_change_playback();
		}
		if(!this.c_fading) {
			this.c_fading = true;
			App.ticker.add($bind(this,this.func_fade));
		}
	}
	,__class__: byteware_media_SingleTrackChannel
});
var haxe_IMap = function() { };
haxe_IMap.__name__ = true;
haxe_IMap.prototype = {
	__class__: haxe_IMap
};
var haxe_ds_IntMap = function() {
	this.h = { };
};
haxe_ds_IntMap.__name__ = true;
haxe_ds_IntMap.__interfaces__ = [haxe_IMap];
haxe_ds_IntMap.prototype = {
	set: function(key,value) {
		this.h[key] = value;
	}
	,remove: function(key) {
		if(!this.h.hasOwnProperty(key)) {
			return false;
		}
		delete(this.h[key]);
		return true;
	}
	,__class__: haxe_ds_IntMap
};
var haxe_ds_StringMap = function() {
	this.h = { };
};
haxe_ds_StringMap.__name__ = true;
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.prototype = {
	set: function(key,value) {
		if(__map_reserved[key] != null) {
			this.setReserved(key,value);
		} else {
			this.h[key] = value;
		}
	}
	,setReserved: function(key,value) {
		if(this.rh == null) {
			this.rh = { };
		}
		this.rh["$" + key] = value;
	}
	,getReserved: function(key) {
		if(this.rh == null) {
			return null;
		} else {
			return this.rh["$" + key];
		}
	}
	,remove: function(key) {
		if(__map_reserved[key] != null) {
			key = "$" + key;
			if(this.rh == null || !this.rh.hasOwnProperty(key)) {
				return false;
			}
			delete(this.rh[key]);
			return true;
		} else {
			if(!this.h.hasOwnProperty(key)) {
				return false;
			}
			delete(this.h[key]);
			return true;
		}
	}
	,keys: function() {
		return HxOverrides.iter(this.arrayKeys());
	}
	,arrayKeys: function() {
		var out = [];
		for( var key in this.h ) {
		if(this.h.hasOwnProperty(key)) {
			out.push(key);
		}
		}
		if(this.rh != null) {
			for( var key in this.rh ) {
			if(key.charCodeAt(0) == 36) {
				out.push(key.substr(1));
			}
			}
		}
		return out;
	}
	,__class__: haxe_ds_StringMap
};
var js__$Boot_HaxeError = function(val) {
	Error.call(this);
	this.val = val;
	this.message = String(val);
	if(Error.captureStackTrace) {
		Error.captureStackTrace(this,js__$Boot_HaxeError);
	}
};
js__$Boot_HaxeError.__name__ = true;
js__$Boot_HaxeError.wrap = function(val) {
	if((val instanceof Error)) {
		return val;
	} else {
		return new js__$Boot_HaxeError(val);
	}
};
js__$Boot_HaxeError.__super__ = Error;
js__$Boot_HaxeError.prototype = $extend(Error.prototype,{
	__class__: js__$Boot_HaxeError
});
var js_Boot = function() { };
js_Boot.__name__ = true;
js_Boot.getClass = function(o) {
	if((o instanceof Array) && o.__enum__ == null) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o instanceof Array) {
			if(o.__enum__) {
				if(o.length == 2) {
					return o[0];
				}
				var str = o[0] + "(";
				s += "\t";
				var _g1 = 2;
				var _g = o.length;
				while(_g1 < _g) {
					var i = _g1++;
					if(i != 2) {
						str += "," + js_Boot.__string_rec(o[i],s);
					} else {
						str += js_Boot.__string_rec(o[i],s);
					}
				}
				return str + ")";
			}
			var l = o.length;
			var i1;
			var str1 = "[";
			s += "\t";
			var _g11 = 0;
			var _g2 = l;
			while(_g11 < _g2) {
				var i2 = _g11++;
				str1 += (i2 > 0 ? "," : "") + js_Boot.__string_rec(o[i2],s);
			}
			str1 += "]";
			return str1;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e ) {
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var k = null;
		var str2 = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str2.length != 2) {
			str2 += ", \n";
		}
		str2 += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str2 += "\n" + s + "}";
		return str2;
	case "string":
		return o;
	default:
		return String(o);
	}
};
js_Boot.__interfLoop = function(cc,cl) {
	if(cc == null) {
		return false;
	}
	if(cc == cl) {
		return true;
	}
	var intf = cc.__interfaces__;
	if(intf != null) {
		var _g1 = 0;
		var _g = intf.length;
		while(_g1 < _g) {
			var i = _g1++;
			var i1 = intf[i];
			if(i1 == cl || js_Boot.__interfLoop(i1,cl)) {
				return true;
			}
		}
	}
	return js_Boot.__interfLoop(cc.__super__,cl);
};
js_Boot.__instanceof = function(o,cl) {
	if(cl == null) {
		return false;
	}
	switch(cl) {
	case Array:
		if((o instanceof Array)) {
			return o.__enum__ == null;
		} else {
			return false;
		}
		break;
	case Bool:
		return typeof(o) == "boolean";
	case Dynamic:
		return true;
	case Float:
		return typeof(o) == "number";
	case Int:
		if(typeof(o) == "number") {
			return (o|0) === o;
		} else {
			return false;
		}
		break;
	case String:
		return typeof(o) == "string";
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if(o instanceof cl) {
					return true;
				}
				if(js_Boot.__interfLoop(js_Boot.getClass(o),cl)) {
					return true;
				}
			} else if(typeof(cl) == "object" && js_Boot.__isNativeObj(cl)) {
				if(o instanceof cl) {
					return true;
				}
			}
		} else {
			return false;
		}
		if(cl == Class ? o.__name__ != null : false) {
			return true;
		}
		if(cl == Enum ? o.__ename__ != null : false) {
			return true;
		}
		return o.__enum__ == cl;
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__isNativeObj = function(o) {
	return js_Boot.__nativeClassName(o) != null;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var js_Browser = function() { };
js_Browser.__name__ = true;
js_Browser.getLocalStorage = function() {
	try {
		var s = window.localStorage;
		s.getItem("");
		return s;
	} catch( e ) {
		return null;
	}
};
var platform_Context = function() {
};
platform_Context.__name__ = true;
platform_Context.prototype = {
	save: function() {
	}
	,restore: function() {
	}
	,pre_render: function() {
	}
	,post_render: function() {
	}
	,transform: function(a,b,c,d,e,f) {
	}
	,translate: function(x,y) {
	}
	,scale: function(x,y) {
	}
	,rotate_deg: function(angle) {
		this.rotate_rad(angle * 3.141592653589793 / 180.0);
	}
	,rotate_rad: function(angle) {
	}
	,resize: function(w,h) {
	}
	,adjustAlpha: function(coef) {
	}
	,setAlpha: function(coef) {
	}
	,crop: function(x,y,w,h) {
	}
	,setMask: function(mask) {
	}
	,drawRect: function(color,x,y,w,h) {
	}
	,drawTexture: function(texture,x,y) {
	}
	,drawTextureRegion: function(texture,x,y,reg_x,reg_y,reg_w,reg_h) {
	}
	,__class__: platform_Context
};
var platform_Display = function() {
	this.onResize = new tofu_events_Event0(false,false);
};
platform_Display.__name__ = true;
platform_Display.prototype = {
	get_w: function() {
		return 0;
	}
	,get_h: function() {
		return 0;
	}
	,__class__: platform_Display
};
var platform_Loader = function(max_slots) {
	this.c_max_slots = max_slots;
	this.event_complete();
};
platform_Loader.__name__ = true;
platform_Loader.prototype = {
	add: function(info) {
		var valid = this.c_base.indexOf(info) == -1;
		if(valid) {
			this.c_base[this.numAssets++] = info;
		}
		return valid;
	}
	,remove: function(info) {
		if(this.isLoading) {
			return false;
		}
		var i = this.c_base.indexOf(info);
		if(i != -1) {
			this.c_base.splice(i,1);
			this.numAssets--;
			return true;
		}
		return false;
	}
	,clear: function() {
		if(this.isLoading) {
			return false;
		}
		this.c_base = [];
		this.numAssets = 0;
		return true;
	}
	,start: function(onComplete,onProgress) {
		var _gthis = this;
		if(this.isLoading) {
			return false;
		} else {
			this.isLoading = true;
		}
		if(this.numAssets == 0) {
			if(onComplete != null) {
				onComplete();
			}
			return false;
		}
		this.cf_complete = onComplete;
		this.cf_progress = onProgress;
		var async = function(_) {
			App.ticker.remove(async);
			_gthis.event_start();
		};
		App.ticker.add(async);
		return true;
	}
	,cancel: function(onCanceled,dispose_assets) {
		if(dispose_assets == null) {
			dispose_assets = true;
		}
		return false;
	}
	,loadData: function(path,type,onComplete,onProgress) {
		return false;
	}
	,loadAsset: function(info,onComplete,onProgress) {
		if(info == null) {
			console.log("BOO");
		}
		if(info == null) {
			return false;
		} else {
			var _g = info.type;
			switch(_g[1]) {
			case 0:
				return this.loadData(info.path,byteware_assets_AssetType.TEXTURE,function(data) {
					var exists = info.root != null;
					var prev = exists ? info.root : null;
					var asset = App.platform.get_renderer().createTextureFromNativeData(data,prev);
					if(!exists) {
						info.root = asset;
						asset.info = info;
						Res.setTexture(info.name,asset,true);
					}
					if(onComplete != null) {
						onComplete();
					}
				},onProgress);
			case 1:
				return this.loadData(info.path,byteware_assets_AssetType.STRING,function(data1) {
					Res.setString(info.name,data1,true);
					if(info.flag_remove_entry && info.pack != null) {
						info.pack.remove(info);
					}
					if(onComplete != null) {
						onComplete();
					}
				},onProgress);
			case 2:
				return this.loadData(info.path,byteware_assets_AssetType.SOUND,function(data2) {
					var exists1 = info.root != null;
					var prev1 = exists1 ? info.root : null;
					var asset1 = App.platform.get_sound().createSoundFromNativeData(data2,prev1);
					if(!exists1) {
						info.root = asset1;
						asset1.info = info;
						Res.setSound(info.name,asset1,true);
					}
					if(onComplete != null) {
						onComplete();
					}
				},onProgress);
			}
		}
	}
	,event_start: function() {
		var i = this.c_max_slots < this.numAssets ? this.c_max_slots : this.numAssets;
		while(this.c_curr_entry < i) this.loadAsset(this.c_base[this.c_curr_entry++],$bind(this,this.event_next),$bind(this,this.event_progress));
	}
	,event_next: function() {
		this.progress = ++this.c_curr_loaded / this.numAssets;
		if(this.c_curr_entry < this.numAssets) {
			this.loadAsset(this.c_base[this.c_curr_entry++],$bind(this,this.event_next),$bind(this,this.event_progress));
		}
		if(this.cf_progress != null) {
			this.cf_progress(this.progress);
		}
		if(this.progress >= 1.0) {
			this.event_complete();
		}
	}
	,event_progress: function(file_progress) {
		this.progress = (this.c_curr_loaded + file_progress) / this.numAssets;
		if(this.cf_progress != null) {
			this.cf_progress(this.progress);
		}
	}
	,event_complete: function() {
		this.isLoading = false;
		this.progress = 0.0;
		this.numAssets = this.c_curr_loaded = this.c_curr_entry = 0;
		this.c_base = [];
		if(this.cf_complete != null) {
			this.cf_complete();
		}
		this.cf_complete = null;
		this.cf_progress = null;
	}
	,__class__: platform_Loader
};
var platform_Platform = function(app_name) {
};
platform_Platform.__name__ = true;
platform_Platform.prototype = {
	get_display: function() {
		return null;
	}
	,get_renderer: function() {
		return null;
	}
	,get_sound: function() {
		return null;
	}
	,get_loader: function() {
		return null;
	}
	,get_storage: function() {
		return null;
	}
	,__class__: platform_Platform
};
var platform_RendererType = { __ename__ : true, __constructs__ : ["CANVAS","OPENGL","CUSTOM"] };
platform_RendererType.CANVAS = ["CANVAS",0];
platform_RendererType.CANVAS.__enum__ = platform_RendererType;
platform_RendererType.OPENGL = ["OPENGL",1];
platform_RendererType.OPENGL.__enum__ = platform_RendererType;
platform_RendererType.CUSTOM = ["CUSTOM",2];
platform_RendererType.CUSTOM.__enum__ = platform_RendererType;
var platform_Renderer = function(renderer_type,is_gpu) {
	this.type = renderer_type;
	this.isGPU = is_gpu;
};
platform_Renderer.__name__ = true;
platform_Renderer.prototype = {
	pre_render: function() {
		this.context.pre_render();
	}
	,post_render: function() {
		this.context.post_render();
	}
	,createTexture: function(w,h,to) {
		return null;
	}
	,createTextureFromNativeData: function(textureData,to) {
		return null;
	}
	,register_mask: function() {
		return -1;
	}
	,unregister_mask: function(id) {
	}
	,get_antialiasing: function() {
		return false;
	}
	,set_antialiasing: function(val) {
		return false;
	}
	,__class__: platform_Renderer
};
var platform_SoundAsset = function() {
	byteware_assets_Asset.call(this);
	this.isStarted = this.c_paused = this.c_manual = false;
	this.c_vol = -1.0;
	this.c_loop = false;
};
platform_SoundAsset.__name__ = true;
platform_SoundAsset.__super__ = byteware_assets_Asset;
platform_SoundAsset.prototype = $extend(byteware_assets_Asset.prototype,{
	play: function(vol,loop,onComplete,onCompleteArgs) {
		if(loop == null) {
			loop = false;
		}
		if(vol == null) {
			vol = 1.0;
		}
		this.set_loop(loop);
		this.set_vol(vol);
		this.cf_comp = onComplete;
		this.cf_comp_args = onCompleteArgs;
	}
	,stop: function() {
	}
	,event_change_volume: function() {
	}
	,event_change_playback: function() {
	}
	,event_sound_complete: function() {
		if(!this.c_loop) {
			this.stop();
		}
		ReflectTools.call(this.cf_comp,this.cf_comp_args);
	}
	,get_isPaused: function() {
		return this.c_manual;
	}
	,set_isPaused: function(val) {
		if(val != this.c_manual) {
			this.c_manual = this.c_paused = val;
			this.event_change_playback();
		}
		return val;
	}
	,get_vol: function() {
		return this.c_vol;
	}
	,set_vol: function(val) {
		if(val < 0.0) {
			val = 0.0;
		} else if(val > 1.0) {
			val = 1.0;
		}
		if(val != this.c_vol) {
			this.c_vol = val;
			this.event_change_volume();
		}
		return val;
	}
	,get_loop: function() {
		return this.c_loop;
	}
	,set_loop: function(val) {
		return this.c_loop = val;
	}
	,__class__: platform_SoundAsset
});
var platform_SoundSystemType = { __ename__ : true, __constructs__ : ["DEFAULT","CUSTOM"] };
platform_SoundSystemType.DEFAULT = ["DEFAULT",0];
platform_SoundSystemType.DEFAULT.__enum__ = platform_SoundSystemType;
platform_SoundSystemType.CUSTOM = ["CUSTOM",1];
platform_SoundSystemType.CUSTOM.__enum__ = platform_SoundSystemType;
var platform_SoundSystem = function(sound_system_type) {
	this.type = sound_system_type;
};
platform_SoundSystem.__name__ = true;
platform_SoundSystem.prototype = {
	createSoundFromNativeData: function(soundData,to) {
		return null;
	}
	,__class__: platform_SoundSystem
};
var platform_Storage = function(config_name) {
	this.c_name = config_name;
	this.c_base = new haxe_ds_StringMap();
	this.isChanged = false;
};
platform_Storage.__name__ = true;
platform_Storage.prototype = {
	load: function() {
		return false;
	}
	,save: function() {
		return false;
	}
	,clear: function() {
		return false;
	}
	,remove: function(name) {
		var exists = this.c_base.remove(name);
		if(exists) {
			this.isChanged = true;
		}
		return exists;
	}
	,get: function(name,default_value) {
		var _this = this.c_base;
		if((__map_reserved[name] != null ? _this.getReserved(name) : _this.h[name]) == null) {
			this.set(name,default_value);
			return default_value;
		}
		var _this1 = this.c_base;
		if(__map_reserved[name] != null) {
			return _this1.getReserved(name);
		} else {
			return _this1.h[name];
		}
	}
	,set: function(name,value) {
		var _this = this.c_base;
		var created = (__map_reserved[name] != null ? _this.getReserved(name) : _this.h[name]) == null;
		if(name == null || value == null) {
			created = false;
		} else {
			var _this1 = this.c_base;
			if((__map_reserved[name] != null ? _this1.getReserved(name) : _this1.h[name]) != value) {
				this.isChanged = true;
			}
			var _this2 = this.c_base;
			if(__map_reserved[name] != null) {
				_this2.setReserved(name,value);
			} else {
				_this2.h[name] = value;
			}
		}
		return created;
	}
	,geti: function(name,default_value) {
		if(default_value == null) {
			default_value = 0;
		}
		var _this = this.c_base;
		if((__map_reserved[name] != null ? _this.getReserved(name) : _this.h[name]) == null) {
			this.set(name,"" + default_value);
			return default_value;
		}
		var _this1 = this.c_base;
		return Std.parseInt(__map_reserved[name] != null ? _this1.getReserved(name) : _this1.h[name]);
	}
	,seti: function(name,value) {
		return this.set(name,"" + value);
	}
	,getf: function(name,default_value) {
		if(default_value == null) {
			default_value = 0.0;
		}
		var _this = this.c_base;
		if((__map_reserved[name] != null ? _this.getReserved(name) : _this.h[name]) == null) {
			this.set(name,"" + default_value);
			return default_value;
		}
		var _this1 = this.c_base;
		return parseFloat(__map_reserved[name] != null ? _this1.getReserved(name) : _this1.h[name]);
	}
	,setf: function(name,value) {
		return this.set(name,"" + value);
	}
	,getb: function(name,default_value) {
		if(default_value == null) {
			default_value = false;
		}
		var _this = this.c_base;
		if((__map_reserved[name] != null ? _this.getReserved(name) : _this.h[name]) == null) {
			this.set(name,default_value ? "1" : "0");
			return default_value;
		}
		var _this1 = this.c_base;
		return (__map_reserved[name] != null ? _this1.getReserved(name) : _this1.h[name]) != "0";
	}
	,setb: function(name,value) {
		return this.set(name,value ? "1" : "0");
	}
	,__class__: platform_Storage
};
var platform_TextureAsset = function(memory_id) {
	byteware_assets_Asset.call(this);
	this.id = memory_id;
	this.w = this.h = 0;
	this.texture = new byteware_graphics_Texture(this,0,0,0,0,0.0,0.0);
};
platform_TextureAsset.__name__ = true;
platform_TextureAsset.__super__ = byteware_assets_Asset;
platform_TextureAsset.prototype = $extend(byteware_assets_Asset.prototype,{
	get_context: function() {
		return null;
	}
	,__class__: platform_TextureAsset
});
var platform_html5_CanvasBuffer = function(buffer_id,buffer_width,buffer_height,alpha_suported) {
	if(alpha_suported == null) {
		alpha_suported = true;
	}
	this.id = buffer_id;
	this.w = buffer_width;
	this.h = buffer_height;
	this.canvas = platform_html5_CanvasTools.createCanvas(this.w,this.h);
	this.context2D = this.canvas.getContext("2d",{ alpha : alpha_suported});
};
platform_html5_CanvasBuffer.__name__ = true;
platform_html5_CanvasBuffer.prototype = {
	__class__: platform_html5_CanvasBuffer
};
var platform_html5_CanvasContext = function(canvasElement,renderer) {
	this.test_mat = new byteware_geom_Mat();
	platform_Context.call(this);
	this.framebuffer = canvasElement;
	this.framebuffer_ctx = canvasElement.getContext("2d",{ alpha : false});
	this.backbuffer = window.document.createElement("canvas");
	this.backbuffer_ctx = this.backbuffer.getContext("2d",{ alpha : false});
	this.backbuffer.width = App.WIDTH;
	this.backbuffer.height = App.HEIGHT;
	this.settings = new platform_html5_CanvasDrawSettings(null);
	this.c_renderer = renderer;
};
platform_html5_CanvasContext.__name__ = true;
platform_html5_CanvasContext.__super__ = platform_Context;
platform_html5_CanvasContext.prototype = $extend(platform_Context.prototype,{
	save: function() {
		this.settings = this.settings.next();
	}
	,restore: function() {
		if(this.settings.swapBuffers) {
			var mask = this.settings.mask;
			var mask_mat = mask.get_mat();
			this.settings.mat.copy(this.test_mat);
			this.test_mat.multiply(mask_mat);
			this.backbuffer_ctx.setTransform(this.test_mat.a,this.test_mat.b,this.test_mat.c,this.test_mat.d,this.test_mat.e,this.test_mat.f);
			var tmp = mask.get_isInverted() ? "destination-out" : "destination-in";
			this.backbuffer_ctx.globalCompositeOperation = tmp;
			this.drawTexture(mask.get_texture(),0.0,0.0);
			this.backbuffer_ctx.globalCompositeOperation = "source-over";
			var prev_element = this.settings.element;
			var prev_context = this.settings.context;
			prev_context.setTransform(1.0,0.0,0.0,1.0,0.0,0.0);
			prev_context.drawImage(this.backbuffer,0.0,0.0,App.WIDTH,App.HEIGHT);
			this.backbuffer = prev_element;
			this.backbuffer_ctx = prev_context;
		}
		this.settings = this.settings.prev();
		this.apply_transform();
	}
	,pre_render: function() {
		var mat = App.root.get_mat();
		this.framebuffer_ctx.setTransform(mat.a,mat.b,mat.c,mat.d,Math.round(mat.e),Math.round(mat.f));
		this.backbuffer_ctx.fillStyle = "#000000";
		this.backbuffer_ctx.globalCompositeOperation = "copy";
		this.backbuffer_ctx.fillRect(0.0,0.0,App.WIDTH,App.HEIGHT);
		this.backbuffer_ctx.globalCompositeOperation = "source-over";
	}
	,post_render: function() {
		this.framebuffer_ctx.drawImage(this.backbuffer,0.0,0.0,App.WIDTH,App.HEIGHT);
	}
	,transform: function(a,b,c,d,e,f) {
		this.test_mat.set(a,b,c,d,e,f);
		this.settings.mat.multiply(this.test_mat);
		this.apply_transform();
	}
	,translate: function(x,y) {
		this.settings.mat.translate(x,y);
		this.apply_transform();
	}
	,scale: function(x,y) {
		this.settings.mat.scale(x,y);
		this.apply_transform();
	}
	,rotate_rad: function(angle) {
		this.settings.mat.rotate_deg(angle * 180.0 / 3.141592653589793);
		this.apply_transform();
	}
	,adjustAlpha: function(coef) {
	}
	,setAlpha: function(coef) {
	}
	,crop: function(x,y,w,h) {
	}
	,setMask: function(mask) {
		var mask_buffer = this.c_renderer.getBuffer(mask.id);
		this.settings.setBuffer(this.backbuffer,this.backbuffer_ctx);
		this.settings.mask = mask;
		this.backbuffer = mask_buffer.canvas;
		this.backbuffer_ctx = mask_buffer.context2D;
		this.apply_transform();
	}
	,drawRect: function(color,x,y,w,h) {
		var code = (16777215 & color).toString(16);
		while(code.length < 6) code = "0" + code;
		this.backbuffer_ctx.fillStyle = "#" + code;
		this.backbuffer_ctx.fillRect(x,y,w,h);
	}
	,drawTexture: function(texture,x,y) {
		var asset = texture.asset;
		var w = texture.w;
		var h = texture.h;
		this.backbuffer_ctx.drawImage(asset.textureData,texture.x,texture.y,w,h,x,y,w,h);
	}
	,drawTextureRegion: function(texture,x,y,reg_x,reg_y,reg_w,reg_h) {
		var asset = texture.asset;
		this.backbuffer_ctx.drawImage(asset.textureData,texture.x + reg_x,texture.y + reg_y,reg_w,reg_h,x,y,reg_w,reg_h);
	}
	,apply_transform: function() {
		var mat = this.settings.mat;
		this.backbuffer_ctx.setTransform(mat.a,mat.b,mat.c,mat.d,Math.round(mat.e),Math.round(mat.f));
	}
	,__class__: platform_html5_CanvasContext
});
var platform_html5_CanvasDrawSettings = function(prev_node) {
	if(prev_node != null) {
		this.c_prev = prev_node;
	} else {
		var curr = new platform_html5_CanvasDrawSettings(this);
		var i = 14;
		while(--i > -1) {
			var next = new platform_html5_CanvasDrawSettings(curr);
			curr = next;
		}
	}
	this.mat = new byteware_geom_Mat();
	this.reset();
};
platform_html5_CanvasDrawSettings.__name__ = true;
platform_html5_CanvasDrawSettings.prototype = {
	setBuffer: function(prev_element,prev_context) {
		this.swapBuffers = true;
		this.element = prev_element;
		this.context = prev_context;
	}
	,next: function() {
		var next_node = this.c_next;
		if(next_node == null) {
			next_node = new platform_html5_CanvasDrawSettings(this);
			this.c_next = next_node;
		}
		this.mat.copy(next_node.mat);
		return next_node;
	}
	,prev: function() {
		this.reset();
		return this.c_prev;
	}
	,reset: function() {
		this.swapBuffers = false;
		this.context = null;
		this.element = null;
	}
	,__class__: platform_html5_CanvasDrawSettings
};
var platform_html5_CanvasRenderer = function(canvasElement) {
	platform_Renderer.call(this,platform_RendererType.CANVAS,false);
	this.context = new platform_html5_CanvasContext(canvasElement,this);
	this.c_antialiasing = true;
	var is_ios = new EReg("(iPhone|iPod|iPad)","").match(window.navigator.userAgent);
	this.useCanvasTextures = true;
	this.maxTextureSize = is_ios ? 2048 : 1024;
	this.c_buffers = [];
	this.c_num_buffers = 0;
};
platform_html5_CanvasRenderer.__name__ = true;
platform_html5_CanvasRenderer.__super__ = platform_Renderer;
platform_html5_CanvasRenderer.prototype = $extend(platform_Renderer.prototype,{
	createTexture: function(w,h,to) {
		if(to == null) {
			to = new platform_html5_CanvasTextureAsset(platform_html5_CanvasTools.createCanvas(MathTools.nextPow2(w),MathTools.nextPow2(h)),-1);
		} else {
			to.upload(platform_html5_CanvasTools.createCanvas(w,h));
		}
		to.texture.set(to,0,0,w,h,0.0,0.0);
		return to;
	}
	,createTextureFromNativeData: function(textureData,to) {
		if(to == null) {
			to = new platform_html5_CanvasTextureAsset(this.useCanvasTextures ? platform_html5_CanvasTools.createCanvasFrom(textureData) : textureData,-1);
		} else {
			to.upload(this.useCanvasTextures ? platform_html5_CanvasTools.createCanvasFrom(textureData) : textureData);
		}
		to.texture.set(to,0,0,textureData.width,textureData.height,0.0,0.0);
		return to;
	}
	,register_mask: function() {
		var id = this.c_num_buffers++;
		var buffer = new platform_html5_CanvasBuffer(id,App.WIDTH,App.HEIGHT,true);
		this.c_buffers[id] = buffer;
		return id;
	}
	,getBuffer: function(id) {
		return this.c_buffers[id];
	}
	,unregister_mask: function(id) {
	}
	,get_antialiasing: function() {
		return this.c_antialiasing;
	}
	,set_antialiasing: function(val) {
		if(val != this.c_antialiasing) {
			this.c_antialiasing = val;
		}
		return val;
	}
	,__class__: platform_html5_CanvasRenderer
});
var platform_html5_CanvasTextureAsset = function(texture_data,memory_id) {
	platform_TextureAsset.call(this,memory_id);
	this.upload(texture_data);
};
platform_html5_CanvasTextureAsset.__name__ = true;
platform_html5_CanvasTextureAsset.__super__ = platform_TextureAsset;
platform_html5_CanvasTextureAsset.prototype = $extend(platform_TextureAsset.prototype,{
	upload: function(data) {
		if(this.textureData != null) {
			this.unload();
		}
		this.textureData = data;
		this.isLoaded = data != null;
		if(this.isLoaded) {
			this.w = data.width;
			this.h = data.height;
			this.texture.set(this,0,0,this.w,this.h,0.0,0.0);
		} else {
			this.w = this.h = 0;
			this.texture.set(this,0,0,0,0,0.0,0.0);
		}
		if(this.e_reloaded != null) {
			this.e_reloaded.dispatch(false,false);
		}
		return this.isLoaded;
	}
	,unload: function() {
		var was_loaded = this.isLoaded;
		this.textureData = null;
		this.c_context = null;
		this.isLoaded = false;
		return was_loaded;
	}
	,getContext2D: function() {
		if(!js_Boot.__instanceof(this.textureData,HTMLCanvasElement)) {
			this.textureData = platform_html5_CanvasTools.createCanvasFrom(this.textureData);
		}
		var canvasElement = this.textureData;
		return canvasElement.getContext("2d",null);
	}
	,get_context: function() {
		if(this.c_context == null) {
			this.getContext2D();
			this.c_context = new platform_html5_CanvasContext(this.textureData,null);
		}
		return this.c_context;
	}
	,__class__: platform_html5_CanvasTextureAsset
});
var platform_html5_CanvasTools = function() { };
platform_html5_CanvasTools.__name__ = true;
platform_html5_CanvasTools.createCanvas = function(w,h) {
	var canvasElement = window.document.createElement("canvas");
	canvasElement.width = w;
	canvasElement.height = h;
	return canvasElement;
};
platform_html5_CanvasTools.createCanvasFrom = function(src,power_of_two) {
	if(power_of_two == null) {
		power_of_two = false;
	}
	var w = src.width;
	var h = src.height;
	if(power_of_two) {
		w = MathTools.nextPow2(w);
		h = MathTools.nextPow2(h);
	}
	var canvasElement = platform_html5_CanvasTools.createCanvas(w,h);
	var ctx = canvasElement.getContext("2d",null);
	ctx.save();
	ctx.globalCompositeOperation = "copy";
	ctx.drawImage(src,0,0);
	ctx.restore();
	return canvasElement;
};
var platform_html5_HTML5Display = function(canvasElement) {
	platform_Display.call(this);
	this.canvas = canvasElement;
	window.addEventListener("resize",$bind(this,this.event_resize),false);
	this.resize_w_to = window.innerWidth;
	this.resize_h_to = window.innerHeight;
	this.resize_canvas();
};
platform_html5_HTML5Display.__name__ = true;
platform_html5_HTML5Display.__super__ = platform_Display;
platform_html5_HTML5Display.prototype = $extend(platform_Display.prototype,{
	event_resize: function() {
		this.resize_w_to = window.innerWidth;
		this.resize_h_to = window.innerHeight;
		if(!this.is_resizing) {
			this.is_resizing = true;
			window.setTimeout($bind(this,this.resize_canvas),200);
		}
	}
	,resize_canvas: function() {
		var content = this.canvas.parentElement;
		content.style.width = this.resize_w_to + "px";
		content.style.height = this.resize_h_to + "px";
		this.canvas.width = this.resize_w_to;
		this.canvas.height = this.resize_h_to;
		App.event_resize(this.resize_w_to,this.resize_h_to);
		this.is_resizing = false;
	}
	,get_w: function() {
		return this.canvas.width;
	}
	,get_h: function() {
		return this.canvas.height;
	}
	,__class__: platform_html5_HTML5Display
});
var platform_html5_HTML5Extensions = function() { };
platform_html5_HTML5Extensions.__name__ = true;
platform_html5_HTML5Extensions.load = function(name,object) {
	if(object == null) {
		object = window;
	}
	var ext = Reflect.field(object,name);
	if(ext != null) {
		return { vendor : "", name : name, instance : ext};
	}
	var ext_cap = name.charAt(0).toUpperCase() + HxOverrides.substr(name,1,null);
	var ext_name;
	var ext_vendor;
	var ext_instance;
	var i = platform_html5_HTML5Extensions.vendors.length - 1;
	while(--i > -1) {
		ext_vendor = platform_html5_HTML5Extensions.vendors[i];
		ext_name = ext_vendor + ext_cap;
		ext_instance = Reflect.field(object,ext_name);
		if(ext_instance != null) {
			return { vendor : ext_vendor, name : ext_name, instance : ext_instance};
		}
	}
	return null;
};
platform_html5_HTML5Extensions.loadFirst = function(names,object) {
	var i = -1;
	var ii = names.length;
	while(++i < ii) {
		var ext = platform_html5_HTML5Extensions.load(names[i],object);
		if(ext != null) {
			return ext;
		}
	}
	return null;
};
platform_html5_HTML5Extensions.call = function(name,object) {
	var ext = platform_html5_HTML5Extensions.load(name,object);
	if(ext == null) {
		return false;
	} else {
		object[name] = ext.instance;
	}
	return true;
};
platform_html5_HTML5Extensions.setVendorStyle = function(element,name,value) {
	var style = element.style;
	var i = platform_html5_HTML5Extensions.vendors.length;
	while(--i > -1) style.setProperty("-" + platform_html5_HTML5Extensions.vendors[i] + "-" + name,value);
	style.setProperty(name,value);
};
platform_html5_HTML5Extensions.addVendorListener = function(object,type,listener,capture) {
	if(capture == null) {
		capture = false;
	}
	var i = platform_html5_HTML5Extensions.vendors.length;
	while(--i > -1) object.addEventListener(platform_html5_HTML5Extensions.vendors[i] + type,listener,capture);
	object.addEventListener(type,listener,capture);
};
var platform_html5_HTML5Loader = function() {
	platform_Loader.call(this,3);
};
platform_html5_HTML5Loader.__name__ = true;
platform_html5_HTML5Loader.__super__ = platform_Loader;
platform_html5_HTML5Loader.prototype = $extend(platform_Loader.prototype,{
	download: function(path,type,onComplete,onProgress) {
		var request = null;
		var start = null;
		var intervalID = 0;
		var hasInterval = false;
		var clearInterval = function() {
			if(hasInterval) {
				hasInterval = false;
				window.clearInterval(intervalID);
			}
		};
		var retries = 3;
		var retry = function() {
			retries -= 1;
			if(retries >= 0) {
				start();
				return true;
			}
			return false;
		};
		start = function() {
			clearInterval();
			if(request != null) {
				request.abort();
			}
			request = new XMLHttpRequest();
			request.open("GET",path,true);
			request.responseType = type;
			var progress = 0.0;
			request.onprogress = function(e) {
				if(!hasInterval) {
					hasInterval = true;
					intervalID = window.setInterval(function() {
						if(request.readyState != 4 && Date.now() - progress > 5000) {
							if(!retry()) {
								clearInterval();
							}
						}
					},1000);
				}
				progress = Date.now();
			};
			request.onprogress = function(e1) {
				if(request.status != 0 || !retry()) {
					clearInterval();
				}
				if(onProgress != null) {
					onProgress(e1.loaded / e1.total);
				}
			};
			request.onload = function(_) {
				var response = request.response;
				if(response == null) {
					response = request.responseText;
				}
				clearInterval();
				onComplete(response);
			};
			request.send();
		};
		start();
	}
	,is_blob_supported: function() {
		if(this.c_detect_blob) {
			this.c_detect_blob = false;
			if(new EReg("\\bSilk\\b","").match(window.navigator.userAgent)) {
				return false;
			}
			if(window.Blob == null) {
				return false;
			}
			var request = new XMLHttpRequest();
			request.open("GET",".",true);
			request.responseType = "blob";
			if(request.responseType != "blob") {
				return false;
			}
			this.c_url = platform_html5_HTML5Extensions.load("URL").instance;
		}
		if(this.c_url != null) {
			return this.c_url.createObjectURL != null;
		} else {
			return false;
		}
	}
	,loadData: function(path,type,onComplete,onProgress) {
		var _gthis = this;
		switch(type[1]) {
		case 0:
			var textureData = window.document.createElement("img");
			textureData.addEventListener("load",function(_) {
				onComplete(textureData);
			},false);
			if(this.is_blob_supported()) {
				this.download(path,"blob",function(blob) {
					textureData.src = _gthis.c_url.createObjectURL(blob);
				},onProgress);
			} else {
				textureData.src = path;
			}
			break;
		case 1:
			this.download(path,"text",onComplete,onProgress);
			break;
		case 2:
			var audioElement = window.document.createElement("audio");
			audioElement.preload = "auto";
			var ref = ++platform_html5_HTML5Loader.c_ref_count;
			if(platform_html5_HTML5Loader.c_ref_elements == null) {
				platform_html5_HTML5Loader.c_ref_elements = new haxe_ds_IntMap();
			}
			platform_html5_HTML5Loader.c_ref_elements.set(ref,audioElement);
			var canplaythrough;
			var progress;
			var error;
			canplaythrough = function(_1) {
				platform_html5_HTML5Loader.c_ref_elements.remove(ref);
				audioElement.removeEventListener("canplaythrough",canplaythrough,false);
				audioElement.removeEventListener("progress",progress,false);
				audioElement.removeEventListener("error",error,false);
				onComplete(audioElement);
			};
			progress = function(e) {
			};
			error = function(_2) {
				platform_html5_HTML5Loader.c_ref_elements.remove(ref);
				audioElement.removeEventListener("canplaythrough",canplaythrough,false);
				audioElement.removeEventListener("progress",progress,false);
				audioElement.removeEventListener("error",error,false);
			};
			audioElement.addEventListener("canplaythrough",canplaythrough,false);
			audioElement.addEventListener("progress",progress,false);
			audioElement.addEventListener("error",error,false);
			audioElement.src = path;
			audioElement.load();
			break;
		}
		return true;
	}
	,__class__: platform_html5_HTML5Loader
});
var platform_html5_HTML5Platform = function(app_name) {
	var _gthis = this;
	platform_Platform.call(this,app_name);
	if(window.navigator.userAgent.indexOf("Linux; U; Android 4") >= 0) {
		var sin = Math.sin;
		var cos = Math.cos;
		Math.sin = function(x) {
			if(x == 0) {
				return 0;
			} else {
				return sin(x);
			}
		};
		Math.cos = function(x1) {
			if(x1 == 0) {
				return 1;
			} else {
				return cos(x1);
			}
		};
	}
	var handler = window.onerror;
	window.onerror = function(message,url,line) {
		if(handler != null) {
			return handler(message,url,line);
		} else {
			return false;
		}
	};
	var canvas = window.document.createElement("canvas");
	var content = window.document.getElementById("content");
	content.style.width = Std.string(window.innerWidth) + "px";
	content.style.height = Std.string(window.innerHeight) + "px";
	content.style.overflow = "hidden";
	content.style.position = "relative";
	content.appendChild(canvas);
	canvas.setAttribute("tabindex","0");
	canvas.style.outlineStyle = "none";
	canvas.style.webkitTapHighlightColor = "transparent";
	canvas.focus();
	canvas.addEventListener("contextmenu",function(event) {
		event.preventDefault();
	},false);
	this.c_display = new platform_html5_HTML5Display(canvas);
	this.c_sound = new platform_html5_HTML5SoundSystem();
	this.c_loader = new platform_html5_HTML5Loader();
	this.c_storage = new platform_html5_HTML5Storage(app_name,js_Browser.getLocalStorage());
	this.c_renderer = new platform_html5_CanvasRenderer(canvas);
	var last_touch = 0.0;
	var mouse_down = false;
	content.style.msTouchAction = "none";
	var onMouse = function(e) {
		if(e.timeStamp - last_touch < 1000) {
			return;
		}
		var bounds = canvas.getBoundingClientRect();
		var x2 = (e.clientX - bounds.left) * _gthis.c_display.get_w() / bounds.width;
		var y = (e.clientY - bounds.top) * _gthis.c_display.get_h() / bounds.height;
		var _g = e.type;
		switch(_g) {
		case "mousedown":
			if(e.target != canvas) {
				return;
			}
			e.preventDefault();
			App.root.submitTouch(0,x2,y,byteware_input_TouchState.BEGIN);
			canvas.focus();
			mouse_down = true;
			break;
		case "mousemove":
			App.root.submitTouch(0,x2,y,mouse_down ? byteware_input_TouchState.MOVE : byteware_input_TouchState.OVER);
			break;
		case "mouseup":
			App.root.submitTouch(0,x2,y,byteware_input_TouchState.END);
			break;
		case "DOMMouseScroll":case "mousewheel":
			break;
		}
	};
	window.addEventListener("mousedown",onMouse,false);
	window.addEventListener("mousemove",onMouse,false);
	window.addEventListener("mouseup",onMouse,false);
	canvas.addEventListener("mousewheel",onMouse,false);
	canvas.addEventListener("DOMMouseScroll",onMouse,false);
	var st_touch = typeof(window.ontouchstart) != "undefined";
	var onTouch = function(e1) {
		var touch = st_touch ? e1.changedTouches[0] : e1;
		var bounds1 = e1.target.getBoundingClientRect();
		last_touch = e1.timeStamp;
		var _g1 = e1.type;
		switch(_g1) {
		case "MSPointerMove":case "pointermove":case "touchmove":
			e1.preventDefault();
			App.root.submitTouch(0,(touch.clientX - bounds1.left) * _gthis.c_display.get_w() / bounds1.width,(touch.clientY - bounds1.top) * _gthis.c_display.get_h() / bounds1.height,byteware_input_TouchState.MOVE);
			break;
		case "MSPointerUp":case "pointerup":case "touchcancel":case "touchend":
			App.root.submitTouch(0,(touch.clientX - bounds1.left) * _gthis.c_display.get_w() / bounds1.width,(touch.clientY - bounds1.top) * _gthis.c_display.get_h() / bounds1.height,byteware_input_TouchState.END);
			break;
		case "MSPointerDown":case "pointerdown":case "touchstart":
			e1.preventDefault();
			App.root.submitTouch(0,(touch.clientX - bounds1.left) * _gthis.c_display.get_w() / bounds1.width,(touch.clientY - bounds1.top) * _gthis.c_display.get_h() / bounds1.height,byteware_input_TouchState.BEGIN);
			break;
		}
	};
	if(st_touch) {
		canvas.addEventListener("touchstart",onTouch,false);
		canvas.addEventListener("touchmove",onTouch,false);
		canvas.addEventListener("touchend",onTouch,false);
		canvas.addEventListener("touchcancel",onTouch,false);
	} else {
		canvas.addEventListener("MSPointerDown",onTouch,false);
		canvas.addEventListener("MSPointerMove",onTouch,false);
		canvas.addEventListener("MSPointerUp",onTouch,false);
	}
	var onKey = function(e2) {
		var _g2 = e2.type;
		switch(_g2) {
		case "keydown":
			break;
		case "keyup":
			break;
		}
	};
	canvas.addEventListener("keydown",onKey,false);
	canvas.addEventListener("keyup",onKey,false);
	var hiddenApi = platform_html5_HTML5Extensions.load("hidden",window.document);
	if(hiddenApi.instance != null) {
		var onVisibilityChanged = function(_) {
			var state = Reflect.field(window.document,hiddenApi.name);
			if(state) {
				App.event_deactivate();
			} else {
				App.event_activate();
			}
		};
		onVisibilityChanged(null);
	} else {
		var onPageTransitionChange = function(event1) {
			var state1 = event1.type == "pagehide";
			if(state1) {
				App.event_deactivate();
			} else {
				App.event_activate();
			}
		};
		window.addEventListener("pageshow",onPageTransitionChange,false);
		window.addEventListener("pagehide",onPageTransitionChange,false);
	}
	window.addEventListener("blur",function(_1) {
		App.event_deactivate();
	},false);
	window.addEventListener("focus",function(_2) {
		App.event_activate();
	},false);
	window.addEventListener("unload",function(_3) {
		App.onExit.dispatch(true,true);
	},false);
	var requestAnimationFrame = platform_html5_HTML5Extensions.load("requestAnimationFrame").instance;
	if(requestAnimationFrame == null) {
		window.setInterval(App.event_render,16);
	} else {
		var func_loop = null;
		func_loop = function() {
			App.event_render();
			requestAnimationFrame(func_loop,canvas);
		};
		requestAnimationFrame(func_loop,canvas);
	}
};
platform_html5_HTML5Platform.__name__ = true;
platform_html5_HTML5Platform.__super__ = platform_Platform;
platform_html5_HTML5Platform.prototype = $extend(platform_Platform.prototype,{
	get_display: function() {
		return this.c_display;
	}
	,get_renderer: function() {
		return this.c_renderer;
	}
	,get_sound: function() {
		return this.c_sound;
	}
	,get_loader: function() {
		return this.c_loader;
	}
	,get_storage: function() {
		return this.c_storage;
	}
	,__class__: platform_html5_HTML5Platform
});
var platform_html5_HTML5SoundAsset = function(element) {
	platform_SoundAsset.call(this);
	if(element != null) {
		this.audioElement = element;
		this.audioElement.addEventListener("ended",$bind(this,this.event_sound_complete),false);
	}
};
platform_html5_HTML5SoundAsset.__name__ = true;
platform_html5_HTML5SoundAsset.__super__ = platform_SoundAsset;
platform_html5_HTML5SoundAsset.prototype = $extend(platform_SoundAsset.prototype,{
	upload: function(data) {
		this.unload();
		var element = data;
		if(element == null) {
			return this.isLoaded = false;
		} else {
			this.audioElement = element;
			this.audioElement.addEventListener("ended",$bind(this,this.event_sound_complete),false);
			this.isLoaded = true;
		}
		return true;
	}
	,unload: function() {
		if(this.audioElement == null) {
			return false;
		} else {
			this.stop();
			this.audioElement.removeEventListener("ended",$bind(this,this.event_sound_complete),false);
			this.audioElement = null;
		}
		return true;
	}
	,play: function(vol,loop,onComplete,onCompleteArgs) {
		if(loop == null) {
			loop = false;
		}
		if(vol == null) {
			vol = 1.0;
		}
		platform_SoundAsset.prototype.play.call(this,vol,loop,onComplete,onCompleteArgs);
		if(this.isStarted) {
			this.audioElement.currentTime = 0.0;
		} else {
			this.audioElement.play();
		}
		this.isStarted = true;
	}
	,stop: function() {
		if(this.isStarted) {
			this.isStarted = false;
		} else {
			return;
		}
		this.audioElement.pause();
		this.audioElement.currentTime = 0.0;
	}
	,event_change_volume: function() {
		this.audioElement.volume = this.channel == null ? this.c_vol : this.c_vol * this.channel.c_vol;
	}
	,event_change_playback: function() {
		if(this.c_paused) {
			this.audioElement.pause();
		} else {
			this.audioElement.play();
		}
	}
	,set_loop: function(val) {
		this.audioElement.loop = val;
		return this.c_loop = val;
	}
	,__class__: platform_html5_HTML5SoundAsset
});
var platform_html5_HTML5SoundSystem = function() {
	platform_SoundSystem.call(this,platform_SoundSystemType.DEFAULT);
};
platform_html5_HTML5SoundSystem.__name__ = true;
platform_html5_HTML5SoundSystem.__super__ = platform_SoundSystem;
platform_html5_HTML5SoundSystem.prototype = $extend(platform_SoundSystem.prototype,{
	createSoundFromNativeData: function(soundData,to) {
		if(to == null) {
			to = new platform_html5_HTML5SoundAsset(soundData);
		} else {
			to.upload(soundData);
		}
		return to;
	}
	,__class__: platform_html5_HTML5SoundSystem
});
var platform_html5_HTML5Storage = function(config_name,local_storage) {
	platform_Storage.call(this,"byteware_" + config_name);
	this.c_local_storage = local_storage;
};
platform_html5_HTML5Storage.__name__ = true;
platform_html5_HTML5Storage.__super__ = platform_Storage;
platform_html5_HTML5Storage.prototype = $extend(platform_Storage.prototype,{
	load: function() {
		var raw_data = null;
		try {
			raw_data = this.c_local_storage.getItem(this.c_name);
		} catch( e ) {
		}
		if(raw_data == null) {
			return false;
		} else {
			this.isChanged = false;
		}
		var data = raw_data.split("##");
		var pair;
		var i = data.length;
		while(--i > -1) {
			pair = data[i].split("&&");
			var v = pair[1];
			var _this = this.c_base;
			var key = pair[0];
			if(__map_reserved[key] != null) {
				_this.setReserved(key,v);
			} else {
				_this.h[key] = v;
			}
		}
		return true;
	}
	,save: function() {
		if(!this.isChanged) {
			return false;
		}
		var data = "";
		var sep;
		var key = this.c_base.keys();
		while(key.hasNext()) {
			var key1 = key.next();
			if(data == "") {
				sep = "";
			} else {
				sep = "##";
			}
			var _this = this.c_base;
			data += sep + key1 + "&&" + (__map_reserved[key1] != null ? _this.getReserved(key1) : _this.h[key1]);
		}
		try {
			this.c_local_storage.setItem(this.c_name,data);
		} catch( e ) {
			return false;
		}
		this.isChanged = false;
		return true;
	}
	,clear: function() {
		try {
			this.c_local_storage.removeItem(this.c_name);
		} catch( e ) {
			return false;
		}
		this.c_base = new haxe_ds_StringMap();
		this.isChanged = false;
		return true;
	}
	,__class__: platform_html5_HTML5Storage
});
var $_, $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = function(){ return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; o.hx__closures__[m.__id__] = f; } return f; }
String.prototype.__class__ = String;
String.__name__ = true;
Array.__name__ = true;
Date.prototype.__class__ = Date;
Date.__name__ = ["Date"];
var Int = { __name__ : ["Int"]};
var Dynamic = { __name__ : ["Dynamic"]};
var Float = Number;
Float.__name__ = ["Float"];
var Bool = Boolean;
Bool.__ename__ = ["Bool"];
var Class = { __name__ : ["Class"]};
var Enum = { };
var __map_reserved = {};
App.isStarted = false;
App.isActive = true;
App.isPaused = false;
App.onStarted = new tofu_events_Event0(false,true);
App.onActivate = new tofu_events_Event0(false,false);
App.onDeactivate = new tofu_events_Event0(false,false);
App.onExit = new tofu_events_Event0(false,true);
App.onPause = new tofu_events_Event0(false,false);
App.onResume = new tofu_events_Event0(false,false);
App.onResize = new tofu_events_Event0(false,false);
App.WIDTH = 0;
App.HEIGHT = 0;
App.MIN_WIDTH = 0;
App.MIN_HEIGHT = 0;
App.CURRENT_WIDTH = 0;
App.CURRENT_HEIGHT = 0;
App.TOP = 0;
App.BOTTOM = 0;
App.LEFT = 0;
App.RIGHT = 0;
Main.ghosts = [];
Main.mask_coef_0 = 0.0;
Main.mask_coef_1 = 0.5;
Main.mask_coef_2 = 0.0;
MathTools.E = 1e-6;
MathTools.PI = 3.141592653589793;
MathTools.PQ = 0.7853981633974483;
MathTools.P2 = 6.28318530718;
MathTools.PH = 1.5707963267948966;
MathTools.INT_MIN = -2147483648;
MathTools.INT_MAX = 2147483647;
MathTools.FLOAT_MIN = -1.79769313486231e+308;
MathTools.FLOAT_MAX = 1.79769313486231e+308;
Res.g_base_packs = new haxe_ds_StringMap();
Res.g_base_textures = new haxe_ds_StringMap();
Res.g_base_strings = new haxe_ds_StringMap();
Res.g_base_sounds = new haxe_ds_StringMap();
SFX.numChannels = 0;
byteware_Ticker.globalDelta = 0.0;
byteware_Ticker.numTickers = 0;
byteware_Ticker.g_coef = 1.0;
byteware_Ticker.g_curr = 0.0;
byteware_Ticker.g_prev = 0.0;
byteware_Ticker.g_base = [];
js_Boot.__toStr = ({ }).toString;
platform_html5_HTML5Extensions.vendors = ["webkit","moz","ms","o","khtml"];
platform_html5_HTML5Loader.c_ref_count = 0;
Main.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
